<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Deutsch Lektion 5 - In der Schule</title>
    <style>
        body {
            font-family: system-ui, -apple-system, sans-serif;
            background: linear-gradient(135deg, #f0f3f9, #e0e7ff);
            margin: 0;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 15px;
            box-sizing: border-box;
        }
        .quiz-card {
            background: white;
            width: 100%;
            max-width: 540px;
            padding: 28px;
            border-radius: 24px;
            box-shadow: 0 15px 50px rgba(0,0,0,0.15);
            text-align: center;
        }
        .flag {
            width: 100px; height: 60px;
            margin: 0 auto 20px;
            display: flex; flex-direction: column;
            border: 1px solid #ccc; border-radius: 5px; overflow: hidden;
        }
        .f-b { background: #000; flex: 1; }
        .f-r { background: #d00; flex: 1; }
        .f-g { background: #ff0; flex: 1; }
        h2 { color: #6c5ce7; margin: 0 0 10px; font-size: 2.1rem; }
        .subtitle { color: #555; margin-bottom: 28px; font-size: 1.1rem; }
        .word-de { font-size: 2.3rem; color: #6c5ce7; font-weight: 700; margin: 15px 0; }
        .info-de { color: #e67e22; font-size: 1.1rem; font-style: italic; margin: 8px 0 18px; }
        .example-de {
            background: #f8fbff; padding: 16px; border-radius: 14px;
            margin: 18px 0 24px; text-align: left;
            border-left: 6px solid #6c5ce7; font-size: 1.05rem; line-height: 1.45;
        }
        .opt-btn {
            width: 100%; background: #fff; border: 2px solid #e0e0e0;
            padding: 14px 16px; border-radius: 12px; margin: 8px 0;
            font-size: 1.1rem; font-weight: 600; cursor: pointer;
            transition: all 0.25s; text-align: left;
        }
        .opt-btn:hover:not(:disabled) { border-color: #6c5ce7; background: #f8f5ff; }
        .opt-btn:disabled { opacity: 0.75; cursor: not-allowed; }
        .main-btn {
            width: 100%; padding: 16px; background: #6c5ce7; color: white;
            border: none; border-radius: 14px; font-size: 1.15rem; font-weight: bold;
            cursor: pointer; margin-top: 12px;
        }
        #feedback { font-size: 1.25rem; font-weight: bold; margin: 18px 0 10px; min-height: 35px; }
        #example-full { 
            margin: 15px 0; 
            padding: 15px; 
            background: #f0fff0; 
            border-radius: 12px; 
            font-size: 1.05rem; 
            text-align: left; 
            display: none; 
            border: 1px solid #c8e6c9;
        }
        #full-de { font-weight: bold; }
        #example-vn { 
            margin-top: 10px; 
            color: #444; 
            font-style: italic;
        }
        #stat, #score { font-size: 0.95rem; color: #666; margin-bottom: 12px; }
        .correct { background: #e8f5e9 !important; border-color: #4caf50 !important; color: #1b5e20; }
        .wrong { background: #ffebee !important; border-color: #e53935 !important; color: #b71c1c; }
        .highlight { background: #e8f5e9 !important; border-color: #4caf50 !important; font-weight: bold; cursor: pointer !important; }
    </style>
</head>
<body>
    <div class="quiz-card">
        <div id="start-screen">
            <div class="flag">
                <div class="f-b"></div><div class="f-r"></div><div class="f-g"></div>
            </div>
            <h2>Lektion 5</h2>
            <div class="subtitle">Yasmin und Hoa â€“ In der Schule</div>
            <button class="main-btn" onclick="startApp()">STARTEN</button>
        </div>
        <div id="quiz-ui" style="display:none">
            <div id="stat"></div>
            <div class="word-de" id="w"></div>
            <div class="info-de" id="i"></div>
            <div class="example-de" id="e"></div>
            <div id="opts"></div>
            <div id="feedback"></div>
            <div id="example-full">
                <strong>CÃ¢u Ä‘áº§y Ä‘á»§:</strong> <span id="full-de"></span><br>
                <span id="example-vn"></span>
            </div>
            <button id="next-btn" class="main-btn" style="display:none" onclick="nextQuestion()">WEITER</button>
        </div>
        <div id="end-screen" style="display:none">
            <h2 style="color:#27ae60">Fertig!</h2>
            <div id="score"></div>
            <button class="main-btn" onclick="restartQuiz()">NOCHMAL</button>
        </div>
    </div>

    <script>
        const vocabData = [
            {w: "das Bonbon", f: "das Bonbon, die Bonbons", e: "Aber er will Schokolade und ______ .", full: "Aber er will Schokolade und Bonbons.", vn: "MÃ  cáº­u áº¥y muá»‘n sÃ´-cÃ´-la vá»›i káº¹o.", o: ["káº¹o", "sÃ´-cÃ´-la", "bÃ¡nh quy", "kem"], a: 0},
            {w: "frech", f: "frech", e: "Thien war ______ und hatte eine schlechte Note in Mathe.", full: "Thien war frech und hatte eine schlechte Note in Mathe.", vn: "Thien nghá»‹ch ngá»£m vÃ  bá»‹ Ä‘iá»ƒm kÃ©m mÃ´n ToÃ¡n.", o: ["nghá»‹ch ngá»£m", "ngoan ngoÃ£n", "nhÃºt nhÃ¡t", "chÄƒm chá»‰"], a: 0},
            {w: "die Note", f: "die Note, die Noten", e: "Thien hatte eine schlechte ______ in Mathe.", full: "Thien hatte eine schlechte Note in Mathe.", vn: "Thien bá»‹ Ä‘iá»ƒm kÃ©m mÃ´n ToÃ¡n.", o: ["Ä‘iá»ƒm sá»‘", "bÃ i kiá»ƒm tra", "cÃ´ giÃ¡o", "trÆ°á»ng há»c"], a: 0},
            {w: "die Mathematik / Mathe", f: "die Mathematik / Mathe (Sg.)", e: "Das ist mir ______ .", full: "Das ist mir egal.", vn: "Ká»‡ nÃ³ Ä‘i / TÃ´i khÃ´ng quan tÃ¢m Ä‘Ã¢u.", o: ["ká»‡ nÃ³ Ä‘i", "quan trá»ng", "thÃº vá»‹", "khÃ³ khÄƒn"], a: 0},
            {w: "egal", f: "egal", e: "Das ist mir ______ .", full: "Das ist mir egal.", vn: "Ká»‡ nÃ³ Ä‘i / TÃ´i tháº¥y bÃ¬nh thÆ°á»ng thÃ´i.", o: ["ká»‡ nÃ³ Ä‘i", "quan trá»ng", "khÃ³ chá»‹u", "thÃ­ch thÃº"], a: 0},
            {w: "die BroschÃ¼re", f: "die BroschÃ¼re, die BroschÃ¼ren", e: "Yasmin hat die Eltern______ auf der Schulwebseite schon heruntergeladen.", full: "Yasmin hat die ElternbroschÃ¼re auf der Schulwebseite schon heruntergeladen.", vn: "Yasmin táº£i tÃ i liá»‡u cho phá»¥ huynh trÃªn trang web trÆ°á»ng vá» rá»“i.", o: ["tÃ i liá»‡u giá»›i thiá»‡u", "bÃ i bÃ¡o", "bá»©c thÆ°", "tá» rÆ¡i"], a: 0},
            {w: "die Webseite", f: "die Webseite, die Webseiten", e: "Yasmin hat die ElternbroschÃ¼re auf der Schul______ schon heruntergeladen.", full: "Yasmin hat die ElternbroschÃ¼re auf der Schulwebseite schon heruntergeladen.", vn: "Yasmin táº£i tÃ i liá»‡u cho phá»¥ huynh trÃªn trang web trÆ°á»ng vá» rá»“i.", o: ["trang web", "email", "á»©ng dá»¥ng", "tá»‡p tin"], a: 0},
            {w: "kontrollieren", f: "kontrollieren, hat kontrolliert", e: "Yasmin kann die Hausaufgaben nicht ______ .", full: "Yasmin kann die Hausaufgaben nicht kontrollieren.", vn: "Yasmin khÃ´ng kiá»ƒm tra bÃ i táº­p vá» nhÃ  Ä‘Æ°á»£c.", o: ["kiá»ƒm tra", "lÃ m", "viáº¿t", "Ä‘á»c"], a: 0},
            {w: "die SÃ¼ÃŸigkeiten", f: "die SÃ¼ÃŸigkeiten (Pl.)", e: "______ sind in der Pause erlaubt.", full: "SÃ¼ÃŸigkeiten sind in der Pause erlaubt.", vn: "Ä‚n káº¹o bÃ¡nh trong giá» ra chÆ¡i Ä‘Æ°á»£c.", o: ["káº¹o bÃ¡nh", "trÃ¡i cÃ¢y", "nÆ°á»›c uá»‘ng", "bÃ¡nh mÃ¬"], a: 0},
            {w: "musikalisch", f: "musikalisch", e: "Thien ist sehr intelligent und ______ .", full: "Thien ist sehr intelligent und musikalisch.", vn: "Thien thÃ´ng minh láº¯m vÃ  cÃ³ khiáº¿u Ã¢m nháº¡c.", o: ["cÃ³ khiáº¿u Ã¢m nháº¡c", "giá»i thá»ƒ thao", "yÃªn tÄ©nh", "á»“n Ã o"], a: 0},
            {w: "zurzeit", f: "zurzeit", e: "Thien ist ______ in Vietnam beim Vater.", full: "Thien ist zurzeit in Vietnam beim Vater.", vn: "BÃ¢y giá» Thien Ä‘ang á»Ÿ Viá»‡t Nam vá»›i bá»‘.", o: ["bÃ¢y giá»", "trÆ°á»›c kia", "sau nÃ y", "luÃ´n luÃ´n"], a: 0},
            {w: "deshalb", f: "deshalb", e: "______ ist Thien nun oft allein zu Hause.", full: "Deshalb ist Thien nun oft allein zu Hause.", vn: "NÃªn giá» Thien hay á»Ÿ nhÃ  má»™t mÃ¬nh.", o: ["nÃªn", "tuy nhiÃªn", "máº·c dÃ¹", "vÃ "], a: 0},
            {w: "das Instrument", f: "das Instrument, die Instrumente", e: "Deshalb spiele ich kein ______ .", full: "Deshalb spiele ich kein Instrument.", vn: "VÃ¬ váº­y tÃ´i khÃ´ng chÆ¡i nháº¡c cá»¥.", o: ["nháº¡c cá»¥", "mÃ´n há»c", "trÃ² chÆ¡i", "sÃ¡ch vá»Ÿ"], a: 0},
            {w: "das Fach", f: "das Fach, die FÃ¤cher", e: "Musik ist Thiens Lieblings______ .", full: "Musik ist Thiens Lieblingsfach.", vn: "Ã‚m nháº¡c lÃ  mÃ´n yÃªu thÃ­ch cá»§a Thien.", o: ["mÃ´n há»c", "phÃ²ng há»c", "giÃ¡o viÃªn", "sÃ¡ch vá»Ÿ"], a: 0},
            {w: "die Region", f: "die Region, die Regionen", e: "Ich finde LÃ¤nder und ______ interessant.", full: "Ich finde LÃ¤nder und Regionen interessant.", vn: "TÃ´i tháº¥y cÃ¡c nÆ°á»›c vÃ  vÃ¹ng miá»n thÃº vá»‹ láº¯m.", o: ["vÃ¹ng miá»n", "thÃ nh phá»‘", "quá»‘c gia", "lÃ ng quÃª"], a: 0},
            {w: "die Geografie", f: "die Geografie (Sg.)", e: "Deshalb ist ______ mein Lieblingsfach.", full: "Deshalb ist Geografie mein Lieblingsfach.", vn: "NÃªn Äá»‹a lÃ½ lÃ  mÃ´n yÃªu thÃ­ch cá»§a tÃ´i.", o: ["Äá»‹a lÃ½", "Lá»‹ch sá»­", "ToÃ¡n", "Má»¹ thuáº­t"], a: 0},
            {w: "die Kunst", f: "die Kunst (Sg.)", e: "______ war mein Lieblingsfach.", full: "Kunst war mein Lieblingsfach.", vn: "Má»¹ thuáº­t lÃ  mÃ´n yÃªu thÃ­ch cá»§a tÃ´i ngÃ y xÆ°a.", o: ["Má»¹ thuáº­t", "Ã‚m nháº¡c", "Thá»ƒ dá»¥c", "Sinh há»c"], a: 0},
            {w: "die Physik", f: "die Physik (Sg.)", e: "______ war mein Lieblingsfach.", full: "Physik war mein Lieblingsfach.", vn: "Váº­t lÃ½ lÃ  mÃ´n yÃªu thÃ­ch cá»§a tÃ´i ngÃ y xÆ°a.", o: ["Váº­t lÃ½", "HÃ³a há»c", "Sinh há»c", "Äá»‹a lÃ½"], a: 0},
            {w: "die Chemie", f: "die Chemie (Sg.)", e: "______ war mein Lieblingsfach.", full: "Chemie war mein Lieblingsfach.", vn: "HÃ³a há»c lÃ  mÃ´n yÃªu thÃ­ch cá»§a tÃ´i ngÃ y xÆ°a.", o: ["HÃ³a há»c", "Váº­t lÃ½", "Sinh há»c", "Lá»‹ch sá»­"], a: 0},
            {w: "die Biologie", f: "die Biologie (Sg.)", e: "______ war mein Lieblingsfach.", full: "Biologie war mein Lieblingsfach.", vn: "Sinh há»c lÃ  mÃ´n yÃªu thÃ­ch cá»§a tÃ´i ngÃ y xÆ°a.", o: ["Sinh há»c", "HÃ³a há»c", "Váº­t lÃ½", "Äá»‹a lÃ½"], a: 0},
            {w: "die Geschichte", f: "die Geschichte (Sg.)", e: "______ war mein Lieblingsfach.", full: "Geschichte war mein Lieblingsfach.", vn: "Lá»‹ch sá»­ lÃ  mÃ´n yÃªu thÃ­ch cá»§a tÃ´i ngÃ y xÆ°a.", o: ["Lá»‹ch sá»­", "Äá»‹a lÃ½", "Má»¹ thuáº­t", "Ã‚m nháº¡c"], a: 0},
            {w: "die Sozialkunde", f: "die Sozialkunde (Sg.)", e: "______ war mein Lieblingsfach.", full: "Sozialkunde war mein Lieblingsfach.", vn: "GiÃ¡o dá»¥c cÃ´ng dÃ¢n lÃ  mÃ´n yÃªu thÃ­ch cá»§a tÃ´i ngÃ y xÆ°a.", o: ["GiÃ¡o dá»¥c cÃ´ng dÃ¢n", "ToÃ¡n", "Äá»©c ngá»¯", "Thá»ƒ dá»¥c"], a: 0},
            {w: "weg", f: "weg", e: "Entschuldigung, ich muss jetzt ______ .", full: "Entschuldigung, ich muss jetzt weg.", vn: "Xin lá»—i nhÃ©, tÃ´i pháº£i Ä‘i bÃ¢y giá».", o: ["Ä‘i", "á»Ÿ láº¡i", "ngá»“i xuá»‘ng", "cháº¡y"], a: 0},
            {w: "wenigstens", f: "wenigstens", e: "Ist euer Lehrer ______ nett?", full: "Ist euer Lehrer wenigstens nett?", vn: "Tháº§y cÃ´ cá»§a cÃ¡c báº¡n Ã­t nháº¥t lÃ  tá»‘t bá»¥ng chá»©?", o: ["Ã­t nháº¥t", "nhiá»u nháº¥t", "hoÃ n toÃ n khÃ´ng", "ráº¥t"], a: 0},
            {w: "alles", f: "alles", e: "Hier bei uns ist ______ ganz normal.", full: "Hier bei uns ist alles ganz normal.", vn: "á»ž chá»— tá»¥i mÃ¬nh thÃ¬ má»i thá»© Ä‘á»u bÃ¬nh thÆ°á»ng háº¿t.", o: ["má»i thá»©", "khÃ´ng gÃ¬ cáº£", "má»™t Ã­t", "nhiá»u"], a: 0},
            {w: "die Sendung", f: "die Sendung, die Sendungen", e: "FÃ¼r unsere ______ â€žSo war dasâ€œ brauchen wir eure Hilfe.", full: "FÃ¼r unsere Sendung â€žSo war dasâ€œ brauchen wir eure Hilfe.", vn: "ChÃºng tÃ´i cáº§n sá»± giÃºp Ä‘á»¡ cá»§a cÃ¡c báº¡n cho chÆ°Æ¡ng trÃ¬nh â€œSo war dasâ€.", o: ["chÆ°Æ¡ng trÃ¬nh", "bÃ i hÃ¡t", "phim", "sÃ¡ch"], a: 0},
            {w: "das Thema", f: "das Thema, die Themen", e: "Unser ______ ist diesmal: So war das â€¦", full: "Unser Thema ist diesmal: So war das â€¦", vn: "Chá»§ Ä‘á» láº§n nÃ y cá»§a chÃºng tÃ´i lÃ : So war das â€¦", o: ["chá»§ Ä‘á»", "tiÃªu Ä‘á»", "cÃ¢u chuyá»‡n", "hÃ¬nh áº£nh"], a: 0},
            {w: "diesmal", f: "diesmal", e: "Unser Thema ist ______ : So war das â€¦", full: "Unser Thema ist diesmal: So war das â€¦", vn: "Chá»§ Ä‘á» láº§n nÃ y cá»§a chÃºng tÃ´i lÃ : So war das â€¦", o: ["láº§n nÃ y", "láº§n trÆ°á»›c", "láº§n sau", "luÃ´n luÃ´n"], a: 0},
            {w: "senden", f: "senden, hat gesendet", e: "Dann fÃ¼llt gleich unseren Fragebogen aus und sendet ihn an uns ______ .", full: "Dann fÃ¼llt gleich unseren Fragebogen aus und sendet ihn an uns zurÃ¼ck.", vn: "Sau Ä‘Ã³ Ä‘iá»n ngay báº£ng cÃ¢u há»i vÃ  gá»­i láº¡i cho chÃºng tÃ´i.", o: ["gá»­i láº¡i", "gá»­i Ä‘i", "gá»­i Ä‘áº¿n", "gá»­i vá»"], a: 0},
            {w: "das Radio", f: "das Radio, die Radios", e: "Im ______ hÃ¶re ich gern die Sendung â€žSo war dasâ€œ.", full: "Im Radio hÃ¶re ich gern die Sendung â€žSo war dasâ€œ.", vn: "TÃ´i thÃ­ch nghe chÆ°Æ¡ng trÃ¬nh â€œSo war dasâ€ trÃªn radio.", o: ["radio", "tivi", "mÃ¡y tÃ­nh", "Ä‘iá»‡n thoáº¡i"], a: 0},
            {w: "streng", f: "streng", e: "Ist ihr Englischlehrer ______ ?", full: "Ist ihr Englischlehrer streng?", vn: "Tháº§y giÃ¡o tiáº¿ng Anh cá»§a cÃ¡c báº¡n nghiÃªm kháº¯c láº¯m háº£?", o: ["nghiÃªm kháº¯c", "dá»… tÃ­nh", "vui tÃ­nh", "thÃ¢n thiá»‡n"], a: 0},
            {w: "spannend", f: "spannend", e: "Unser Studium ist echt ______ .", full: "Unser Studium ist echt spannend.", vn: "Viá»‡c há»c cá»§a tá»¥i mÃ¬nh thÃº vá»‹ tháº­t Ä‘áº¥y.", o: ["thÃº vá»‹", "nhÃ m chÃ¡n", "dá»…", "khÃ³"], a: 0},
            {w: "Ã¤hnlich", f: "Ã¤hnlich", e: "Unsere Schulwege waren sehr ______ .", full: "Unsere Schulwege waren sehr Ã¤hnlich.", vn: "ÄÆ°á»ng Ä‘i há»c cá»§a tá»¥i mÃ¬nh giá»‘ng nhau láº¯m.", o: ["giá»‘ng nhau", "khÃ¡c nhau", "dÃ i", "ngáº¯n"], a: 0},
            {w: "unterschiedlich", f: "unterschiedlich", e: "Unsere Lehrer waren sehr ______ .", full: "Unsere Lehrer waren sehr unterschiedlich.", vn: "CÃ¡c tháº§y cÃ´ cá»§a tá»¥i mÃ¬nh khÃ¡c nhau kinh khá»§ng.", o: ["khÃ¡c nhau", "giá»‘ng nhau", "tá»‘t", "xáº¥u"], a: 0},
            {w: "schimpfen", f: "schimpfen, hat geschimpft", e: "Sie hat immer ______ .", full: "Sie hat immer geschimpft.", vn: "CÃ´ áº¥y lÃºc nÃ o cÅ©ng máº¯ng má».", o: ["máº¯ng má»", "khen ngá»£i", "cÆ°á»i", "khÃ³c"], a: 0},
            {w: "die Grundschule", f: "die Grundschule, die Grundschulen", e: "______ am Laurinsplatz.", full: "Grundschule am Laurinsplatz.", vn: "TrÆ°á»ng tiá»ƒu há»c á»Ÿ Laurinsplatz.", o: ["trÆ°á»ng tiá»ƒu há»c", "trÆ°á»ng trung há»c", "trÆ°á»ng Ä‘áº¡i há»c", "nhÃ  tráº»"], a: 0},
            {w: "der Elternabend", f: "der Elternabend, die Elternabende", e: "______ sind sehr wichtig.", full: "Elternabende sind sehr wichtig.", vn: "Buá»•i há»p phá»¥ huynh ráº¥t quan trá»ng.", o: ["buá»•i há»p phá»¥ huynh", "buá»•i há»c thÃªm", "buá»•i ngoáº¡i khÃ³a", "buá»•i thi"], a: 0},
            {w: "das Projekt", f: "das Projekt, die Projekte", e: "Was sind unsere Schul______ ?", full: "Was sind unsere Schulprojekte?", vn: "CÃ¡c dá»± Ã¡n trÆ°á»ng há»c cá»§a tá»¥i mÃ¬nh lÃ  gÃ¬?", o: ["dá»± Ã¡n", "Ä‘iá»ƒm sá»‘", "giÃ¡o viÃªn", "sÃ¡ch vá»Ÿ"], a: 0},
            {w: "die Klassenfahrt", f: "die Klassenfahrt, die Klassenfahrten", e: "Wann sind unsere Wandertage oder ______ ?", full: "Wann sind unsere Wandertage oder Klassenfahrten?", vn: "NgÃ y Ä‘i dÃ£ ngoáº¡i hoáº·c chuyáº¿n Ä‘i lá»›p cá»§a tá»¥i mÃ¬nh lÃ  khi nÃ o?", o: ["chuyáº¿n Ä‘i lá»›p", "buá»•i há»p", "giá» há»c", "ká»³ thi"], a: 0},
            {w: "die Grippe", f: "die Grippe (Sg.)", e: "Hat Ihr Kind Fieber oder eine ______ ?", full: "Hat Ihr Kind Fieber oder eine Grippe?", vn: "Con báº¡n bá»‹ sá»‘t hay bá»‹ cÃºm váº­y?", o: ["cÃºm", "cáº£m láº¡nh", "Ä‘au Ä‘áº§u", "Ä‘au bá»¥ng"], a: 0},
            {w: "das Sekretariat", f: "das Sekretariat, die Sekretariate", e: "Es muss im Schul______ krankgemeldet werden.", full: "Es muss im Schulsekretariat krankgemeldet werden.", vn: "Pháº£i bÃ¡o nghá»‰ á»‘m á»Ÿ vÄƒn phÃ²ng trÆ°á»ng.", o: ["vÄƒn phÃ²ng trÆ°á»ng", "phÃ²ng há»c", "thÆ° viá»‡n", "cÄƒng tin"], a: 0},
            {w: "sich krankmelden", f: "sich krankmelden, hat sich krankgemeldet", e: "Hat Ihr Kind Fieber oder eine Grippe? Es muss im Sekretariat ______ .", full: "Hat Ihr Kind Fieber oder eine Grippe? Es muss im Sekretariat krankgemeldet werden.", vn: "Con báº¡n bá»‹ sá»‘t hay bá»‹ cÃºm? Pháº£i bÃ¡o nghá»‰ á»‘m á»Ÿ vÄƒn phÃ²ng trÆ°á»ng.", o: ["bÃ¡o nghá»‰ á»‘m", "bÃ¡o Ä‘iá»ƒm danh", "bÃ¡o muá»™n", "bÃ¡o vá» sá»›m"], a: 0},
            {w: "mindestens", f: "mindestens", e: "Es muss ______ 24 Stunden lang ohne Fieber sein.", full: "Es muss mindestens 24 Stunden lang ohne Fieber sein.", vn: "Pháº£i Ã­t nháº¥t 24 tiáº¿ng khÃ´ng sá»‘t.", o: ["Ã­t nháº¥t", "nhiá»u nháº¥t", "chÃ­nh xÃ¡c", "khoáº£ng"], a: 0}
        ];

        let currentQuestion = 0;
        let score = 0;

        const positiveFeedback = ["Gut gemacht!", "Sehr gut!", "Super!", "Toll!", "Weiter so!", "Prima!", "Genau richtig!"];
        const negativeFeedback = ["Leider falsch!", "Noch nicht richtig!", "Versuch es noch einmal!", "Nicht ganz richtig!", "Schade!", "Falsch!"];

        function speakGerman(text) {
            if ('speechSynthesis' in window) {
                const utterance = new SpeechSynthesisUtterance(text);
                utterance.lang = 'de-DE';
                utterance.rate = 0.9;
                utterance.volume = 0.9;
                const voices = speechSynthesis.getVoices();
                const deVoice = voices.find(v => v.lang.startsWith('de-'));
                if (deVoice) utterance.voice = deVoice;
                speechSynthesis.cancel();
                speechSynthesis.speak(utterance);
            }
        }

        function startApp() {
            currentQuestion = 0;
            score = 0;
            document.getElementById("start-screen").style.display = "none";
            document.getElementById("end-screen").style.display = "none";
            document.getElementById("quiz-ui").style.display = "block";
            showQuestion();
        }

        function showQuestion() {
            if (currentQuestion >= vocabData.length) {
                showResult();
                return;
            }
            const q = vocabData[currentQuestion];
            const options = [...q.o];
            const correctAnswer = q.a;
            const shuffledOptions = shuffleArray(options);
            const newCorrectIndex = shuffledOptions.indexOf(q.o[correctAnswer]);

            document.getElementById("stat").textContent = `Frage ${currentQuestion + 1} von ${vocabData.length}`;
            document.getElementById("w").textContent = q.w;
            document.getElementById("i").textContent = q.f;
            document.getElementById("e").innerHTML = q.e.replace(/______/g, "___");
            document.getElementById("example-full").style.display = "none";

            const optsDiv = document.getElementById("opts");
            optsDiv.innerHTML = "";
            shuffledOptions.forEach((opt, idx) => {
                const btn = document.createElement("button");
                btn.className = "opt-btn";
                btn.textContent = opt;
                btn.onclick = () => handleClick(idx, btn, q, newCorrectIndex);
                optsDiv.appendChild(btn);
            });

            document.getElementById("feedback").textContent = "";
            document.getElementById("next-btn").style.display = "none";
        }

        function shuffleArray(array) {
            const newArray = [...array];
            for (let i = newArray.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [newArray[i], newArray[j]] = [newArray[j], newArray[i]];
            }
            return newArray;
        }

        function handleClick(selectedIdx, btn, q, correctIndex) {
            const allBtns = document.querySelectorAll(".opt-btn");
            if (allBtns[0].disabled) return;

            allBtns.forEach(b => b.disabled = true);

            if (selectedIdx === correctIndex) {
                score++;
                const msg = positiveFeedback[Math.floor(Math.random() * positiveFeedback.length)];
                document.getElementById("feedback").textContent = msg;
                document.getElementById("feedback").style.color = "#27ae60";
                btn.classList.add("correct");
                speakGerman("Richtig!");
                setTimeout(() => {
                    speakGerman(q.f);
                    document.getElementById("full-de").textContent = q.full;
                    document.getElementById("example-vn").textContent = q.vn;
                    document.getElementById("example-full").style.display = "block";
                }, 1800);
            } else {
                const msg = negativeFeedback[Math.floor(Math.random() * negativeFeedback.length)];
                document.getElementById("feedback").textContent = msg;
                document.getElementById("feedback").style.color = "#e74c3c";
                btn.classList.add("wrong");
                allBtns[correctIndex].classList.add("highlight");
                speakGerman("Falsch!");
                setTimeout(() => {
                    speakGerman(q.f);
                }, 1800);
            }

            document.getElementById("next-btn").style.display = "block";
        }

        function nextQuestion() {
            currentQuestion++;
            showQuestion();
        }

        function showResult() {
            document.getElementById("quiz-ui").style.display = "none";
            document.getElementById("end-screen").style.display = "block";
            const percent = Math.round((score / vocabData.length) * 100);
            let comment = percent >= 85 ? "Ausgezeichnet! ðŸŒŸ" : percent >= 70 ? "Sehr gut! ðŸ‘" : percent >= 50 ? "Gut â€“ weiter Ã¼ben! ðŸ’ª" : "NÃ¤chstes Mal besser! ðŸ˜Š";
            document.getElementById("score").innerHTML = `Du hast <strong>${score}/${vocabData.length}</strong> richtig!<br>(${percent} %)<br><br>${comment}`;
        }

        function restartQuiz() {
            startApp();
        }
    </script>
</body>
</html>
