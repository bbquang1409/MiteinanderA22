<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Deutsch Lektion 8 - Pekka: Unterwegs</title>
    <style>
        body {
            font-family: system-ui, -apple-system, sans-serif;
            background: linear-gradient(135deg, #f0f3f9, #e0e7ff);
            margin: 0;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 15px;
            box-sizing: border-box;
        }
        .quiz-card {
            background: white;
            width: 100%;
            max-width: 540px;
            padding: 28px;
            border-radius: 24px;
            box-shadow: 0 15px 50px rgba(0,0,0,0.15);
            text-align: center;
        }
        .flag {
            width: 100px; height: 60px;
            margin: 0 auto 20px;
            display: flex; flex-direction: column;
            border: 1px solid #ccc; border-radius: 5px; overflow: hidden;
        }
        .f-b { background: #000; flex: 1; }
        .f-r { background: #d00; flex: 1; }
        .f-g { background: #ff0; flex: 1; }
        h2 { color: #6c5ce7; margin: 0 0 10px; font-size: 2.1rem; }
        .subtitle { color: #555; margin-bottom: 28px; font-size: 1.1rem; }
        .word-de { font-size: 2.3rem; color: #6c5ce7; font-weight: 700; margin: 15px 0; }
        .info-de { color: #e67e22; font-size: 1.1rem; font-style: italic; margin: 8px 0 18px; }
        .example-de {
            background: #f8fbff; padding: 16px; border-radius: 14px;
            margin: 18px 0 24px; text-align: left;
            border-left: 6px solid #6c5ce7; font-size: 1.05rem; line-height: 1.45;
        }
        .opt-btn {
            width: 100%; background: #fff; border: 2px solid #e0e0e0;
            padding: 14px 16px; border-radius: 12px; margin: 8px 0;
            font-size: 1.1rem; font-weight: 600; cursor: pointer;
            transition: all 0.25s; text-align: left;
        }
        .opt-btn:hover:not(:disabled) { border-color: #6c5ce7; background: #f8f5ff; }
        .opt-btn:disabled { opacity: 0.75; cursor: not-allowed; }
        .main-btn {
            width: 100%; padding: 16px; background: #6c5ce7; color: white;
            border: none; border-radius: 14px; font-size: 1.15rem; font-weight: bold;
            cursor: pointer; margin-top: 12px;
        }
        #feedback { font-size: 1.25rem; font-weight: bold; margin: 18px 0 10px; min-height: 35px; }
        #example-full { 
            margin: 15px 0; 
            padding: 15px; 
            background: #f0fff0; 
            border-radius: 12px; 
            font-size: 1.05rem; 
            text-align: left; 
            display: none; 
            border: 1px solid #c8e6c9;
        }
        #full-de { font-weight: bold; }
        #example-vn { 
            margin-top: 10px; 
            color: #444; 
            font-style: italic;
        }
        #stat, #score { font-size: 0.95rem; color: #666; margin-bottom: 12px; }
        .correct { background: #e8f5e9 !important; border-color: #4caf50 !important; color: #1b5e20; }
        .wrong { background: #ffebee !important; border-color: #e53935 !important; color: #b71c1c; }
        .highlight { background: #e8f5e9 !important; border-color: #4caf50 !important; font-weight: bold; cursor: pointer !important; }
    </style>
</head>
<body>
    <div class="quiz-card">
        <div id="start-screen">
            <div class="flag">
                <div class="f-b"></div><div class="f-r"></div><div class="f-g"></div>
            </div>
            <h2>Lektion 8</h2>
            <div class="subtitle">Pekka ‚Äì Unterwegs</div>
            <button class="main-btn" onclick="startApp()">STARTEN</button>
        </div>
        <div id="quiz-ui" style="display:none">
            <div id="stat"></div>
            <div class="word-de" id="w"></div>
            <div class="info-de" id="i"></div>
            <div class="example-de" id="e"></div>
            <div id="opts"></div>
            <div id="feedback"></div>
            <div id="example-full">
                <strong>√ù nghƒ©a:</strong> <span id="full-de"></span><br>
                <span id="example-vn"></span>
            </div>
            <button id="next-btn" class="main-btn" style="display:none" onclick="nextQuestion()">WEITER</button>
        </div>
        <div id="end-screen" style="display:none">
            <h2 style="color:#27ae60">Fertig!</h2>
            <div id="score"></div>
            <button class="main-btn" onclick="restartQuiz()">NOCHMAL</button>
        </div>
    </div>

    <script>
        const vocabData = [
            {w: "der Stress", f: "der Stress (Sg.)", e: "Ich glaube, Pekka hat ______ .", full: "Ich glaube, Pekka hat Stress.", vn: "M√¨nh nghƒ© Pekka ƒëang stress l·∫Øm.", o: ["stress", "vui v·∫ª", "b√¨nh tƒ©nh", "m·ªát m·ªèi"], a: 0},
            {w: "die Fahrt", f: "die Fahrt, -en", e: "Wie lange dauert die ______ ?", full: "Wie lange dauert die Fahrt?", vn: "Chuy·∫øn ƒëi m·∫•t bao l√¢u v·∫≠y?", o: ["chuy·∫øn ƒëi", "chuy·∫øn bay", "chuy·∫øn t√†u", "chuy·∫øn xe"], a: 0},
            {w: "die Dauer", f: "die Dauer (Sg.)", e: "Wie lange ist die ______ ?", full: "Wie lange ist die Fahrdauer?", vn: "Th·ªùi gian ƒëi m·∫•t bao l√¢u?", o: ["th·ªùi gian", "kho·∫£ng c√°ch", "t·ªëc ƒë·ªô", "gi√° v√©"], a: 0},
            {w: "die Abfahrt", f: "die Abfahrt, -en", e: "Die ______ in Neuberg ist um 9:22 Uhr.", full: "Die Abfahrt in Neuberg ist um 9:22 Uhr.", vn: "Chuy·∫øn kh·ªüi h√†nh ·ªü Neuberg l√∫c 9:22.", o: ["kh·ªüi h√†nh", "ƒë·∫øn n∆°i", "d·ª´ng", "tr·ªÖ"], a: 0},
            {w: "die Ankunft", f: "die Ankunft (Sg.)", e: "Die ______ in Krassenstein ist um 11:36 Uhr.", full: "Die Ankunft in Krassenstein ist um 11:36 Uhr.", vn: "ƒê·∫øn Krassenstein l√∫c 11:36.", o: ["ƒë·∫øn n∆°i", "kh·ªüi h√†nh", "d·ª´ng", "tr·ªÖ"], a: 0},
            {w: "der Zug", f: "der Zug, -e", e: "Hey, Wilma, such mir eine Bahnverbindung von Neuberg nach Krassenstein mit dem ______ .", full: "Hey, Wilma, such mir eine Bahnverbindung von Neuberg nach Krassenstein mit dem Zug.", vn: "N√†y Wilma, t√¨m gi√∫p m√¨nh chuy·∫øn t√†u t·ª´ Neuberg ƒë·∫øn Krassenstein nh√©.", o: ["t√†u", "xe bu√Ωt", "m√°y bay", "xe h∆°i"], a: 0},
            {w: "das Gleis", f: "das Gleis, -e", e: "Der Zug f√§hrt in Neuberg von ______ 3 ab.", full: "Der Zug f√§hrt in Neuberg von Gleis 3 ab.", vn: "T√†u kh·ªüi h√†nh ·ªü Neuberg t·ª´ ray s·ªë 3.", o: ["ray", "ga", "v√©", "h√†nh l√Ω"], a: 0},
            {w: "die Verbindung", f: "die Verbindung, -en", e: "Hey, Wilma, such mir eine Bahn______ von Neuberg nach Krassenstein.", full: "Hey, Wilma, such mir eine Bahnverbindung von Neuberg nach Krassenstein.", vn: "N√†y Wilma, t√¨m gi√∫p m√¨nh chuy·∫øn t√†u t·ª´ Neuberg ƒë·∫øn Krassenstein nh√©.", o: ["chuy·∫øn t√†u", "v√© t√†u", "ga t√†u", "h√†nh l√Ω"], a: 0},
            {w: "die Pflanze", f: "die Pflanze, -n", e: "Wohin sollen wir die gro√üe ______ stellen?", full: "Wohin sollen wir die gro√üe Pflanze stellen?", vn: "C√°i c√¢y to n√†y ƒë·ªÉ ƒë√¢u ƒë√¢y?", o: ["c√¢y", "b√¨nh", "gh·∫ø", "b√†n"], a: 0},
            {w: "der Zettel", f: "der Zettel, -", e: "Leg den ______ unter das Buch.", full: "Leg den Zettel unter das Buch.", vn: "ƒê·∫∑t t·ªù gi·∫•y d∆∞·ªõi cu·ªën s√°ch.", o: ["t·ªù gi·∫•y", "cu·ªën s√°ch", "c√°i b√∫t", "c√°i k·∫πp"], a: 0},
            {w: "aufteilen", f: "aufteilen, hat aufgeteilt", e: "Und wie habt ihr die Zimmer ______ ?", full: "Und wie habt ihr die Zimmer aufgeteilt?", vn: "V·∫≠y c√°c b·∫°n chia ph√≤ng th·∫ø n√†o?", o: ["chia", "mua", "b√°n", "thu√™"], a: 0},
            {w: "das Kinderzimmer", f: "das Kinderzimmer, -", e: "Wohnzimmer, Schlafzimmer, ______ und mir.", full: "Wohnzimmer, Schlafzimmer, Kinderzimmer und mir.", vn: "Ph√≤ng kh√°ch, ph√≤ng ng·ªß, ph√≤ng tr·∫ª con v√† ph√≤ng c·ªßa t√¥i.", o: ["ph√≤ng tr·∫ª con", "ph√≤ng b·∫øp", "ph√≤ng t·∫Øm", "ph√≤ng l√†m vi·ªác"], a: 0},
            {w: "das Arbeitszimmer", f: "das Arbeitszimmer, -", e: "Wohnzimmer, Schlafzimmer, Kinderzimmer und ______ .", full: "Wohnzimmer, Schlafzimmer, Kinderzimmer und Arbeitszimmer.", vn: "Ph√≤ng kh√°ch, ph√≤ng ng·ªß, ph√≤ng tr·∫ª con v√† ph√≤ng l√†m vi·ªác.", o: ["ph√≤ng l√†m vi·ªác", "ph√≤ng tr·∫ª con", "ph√≤ng b·∫øp", "ph√≤ng t·∫Øm"], a: 0},
            {w: "die Ruhe", f: "die Ruhe (Sg.)", e: "Ein Raum, wo man mal in ______ nachdenken kann.", full: "Ein Raum, wo man mal in Ruhe nachdenken kann.", vn: "M·ªôt ph√≤ng ƒë·ªÉ ng·ªìi y√™n tƒ©nh suy nghƒ©.", o: ["y√™n tƒ©nh", "·ªìn √†o", "vui v·∫ª", "bu·ªìn"], a: 0},
            {w: "nachdenken", f: "nachdenken, hat nachgedacht", e: "Ein Raum, wo man mal in Ruhe ______ kann.", full: "Ein Raum, wo man mal in Ruhe nachdenken kann.", vn: "M·ªôt ph√≤ng ƒë·ªÉ ng·ªìi y√™n tƒ©nh suy nghƒ©.", o: ["suy nghƒ©", "ng·ªß", "ƒÉn", "ch∆°i"], a: 0},
            {w: "zeichnen", f: "zeichnen, hat gezeichnet", e: "Enrico muss f√ºr seine Arbeit oft Gartenpl√§ne ______ .", full: "Enrico muss f√ºr seine Arbeit oft Gartenpl√§ne zeichnen.", vn: "Enrico ph·∫£i v·∫Ω k·∫ø ho·∫°ch v∆∞·ªùn nhi·ªÅu cho c√¥ng vi·ªác.", o: ["v·∫Ω", "vi·∫øt", "ƒë·ªçc", "n√≥i"], a: 0},
            {w: "wahrscheinlich", f: "wahrscheinlich", e: "Und ich brauche das Arbeitszimmer jetzt ______ auch bald.", full: "Und ich brauche das Arbeitszimmer jetzt wahrscheinlich auch bald.", vn: "V√† ch·∫Øc m√¨nh c≈©ng c·∫ßn ph√≤ng l√†m vi·ªác s·ªõm th√¥i.", o: ["ch·∫Øc ch·∫Øn", "c√≥ l·∫Ω", "kh√¥ng", "ch∆∞a"], a: 0},
            {w: "klappen", f: "klappen, hat geklappt", e: "Hat das mit deiner Bewerbung ______ ?", full: "Hat das mit deiner Bewerbung geklappt?", vn: "Vi·ªác xin vi·ªác c·ªßa b·∫°n c√≥ ƒë∆∞·ª£c kh√¥ng?", o: ["ƒë∆∞·ª£c", "kh√¥ng ƒë∆∞·ª£c", "ch∆∞a", "ƒëang"], a: 0},
            {w: "die Chance", f: "die Chance, -n", e: "Es ist noch nicht ganz sicher, aber meine ______ sind sehr, sehr gut!", full: "Es ist noch nicht ganz sicher, aber meine Chancen sind sehr, sehr gut!", vn: "Ch∆∞a ch·∫Øc ch·∫Øn ho√†n to√†n nh∆∞ng c∆° h·ªôi c·ªßa m√¨nh t·ªët l·∫Øm!", o: ["c∆° h·ªôi", "th·ªùi gian", "ti·ªÅn b·∫°c", "s·ª©c kh·ªèe"], a: 0},
            {w: "die Hauptsache", f: "die Hauptsache (Sg.)", e: "Aber die ______ ist: Ihr habt endlich eine Wohnung gefunden.", full: "Aber die Hauptsache ist: Ihr habt endlich eine Wohnung gefunden.", vn: "Nh∆∞ng ƒëi·ªÅu ch√≠nh l√†: C√°c b·∫°n cu·ªëi c√πng c≈©ng t√¨m ƒë∆∞·ª£c nh√† r·ªìi.", o: ["ƒëi·ªÅu ch√≠nh", "ƒëi·ªÅu ph·ª•", "ti·ªÅn b·∫°c", "th·ªùi gian"], a: 0},
            {w: "die Gr√∂√üe", f: "die Gr√∂√üe, -n", e: "Wohnungs______: 75 m¬≤", full: "Wohnungsgr√∂√üe: 75 m¬≤", vn: "Di·ªán t√≠ch nh√†: 75 m¬≤", o: ["di·ªán t√≠ch", "gi√° ti·ªÅn", "v·ªã tr√≠", "ph√≤ng"], a: 0},
            {w: "eigen", f: "eigen", e: "Alma bekommt ein ______ Kinderzimmer.", full: "Alma bekommt ein eigenes Kinderzimmer.", vn: "Alma c√≥ ph√≤ng ri√™ng cho tr·∫ª con.", o: ["ri√™ng", "chung", "l·ªõn", "nh·ªè"], a: 0},
            {w: "modern", f: "modern", e: "Die Wohnung ist ______ .", full: "Die Wohnung ist modern.", vn: "CƒÉn nh√† hi·ªán ƒë·∫°i l·∫Øm.", o: ["hi·ªán ƒë·∫°i", "c·ªï ƒëi·ªÉn", "c≈© k·ªπ", "b·∫©n"], a: 0},
            {w: "preiswert", f: "preiswert", e: "Die Wohnung ist ______ .", full: "Die Wohnung ist preiswert.", vn: "CƒÉn nh√† gi√° r·∫ª ƒë·∫•y.", o: ["gi√° r·∫ª", "ƒë·∫Øt", "mi·ªÖn ph√≠", "cao c·∫•p"], a: 0},
            {w: "zentral", f: "zentral", e: "Die Wohnung liegt ______ .", full: "Die Wohnung liegt zentral.", vn: "CƒÉn nh√† n·∫±m v·ªã tr√≠ trung t√¢m.", o: ["trung t√¢m", "ngo·∫°i √¥", "xa x√¥i", "g·∫ßn s√¥ng"], a: 0},
            {w: "das Erdgeschoss", f: "das Erdgeschoss, -e", e: "Die Wohnung liegt im ______ .", full: "Die Wohnung liegt im Erdgeschoss.", vn: "CƒÉn nh√† ·ªü t·∫ßng tr·ªát.", o: ["t·∫ßng tr·ªát", "t·∫ßng l·∫ßu", "t·∫ßng √°p m√°i", "t·∫ßng h·∫ßm"], a: 0},
            {w: "erreichen", f: "erreichen, hat erreicht", e: "Die Wohnung ______ man mit einem Lift.", full: "Die Wohnung erreicht man mit einem Lift.", vn: "ƒê·∫øn cƒÉn nh√† b·∫±ng thang m√°y.", o: ["ƒë·∫øn", "r·ªùi", "m·ªü", "ƒë√≥ng"], a: 0},
            {w: "der Lift", f: "der Lift, -e", e: "Die Wohnung erreicht man mit einem ______ .", full: "Die Wohnung erreicht man mit einem Lift.", vn: "ƒê·∫øn cƒÉn nh√† b·∫±ng thang m√°y.", o: ["thang m√°y", "c·∫ßu thang", "xe h∆°i", "xe ƒë·∫°p"], a: 0},
            {w: "die Garage", f: "die Garage, -n", e: "Die Wohnung hat eine ______ .", full: "Die Wohnung hat eine Garage.", vn: "CƒÉn nh√† c√≥ gara.", o: ["gara", "s√¢n v∆∞·ªùn", "ban c√¥ng", "h·∫ßm"], a: 0},
            {w: "die √úbernachtung", f: "die √úbernachtung, -en", e: "______ m√∂glichkeiten f√ºr bis zu 64 Personen", full: "√úbernachtungsm√∂glichkeiten f√ºr bis zu 64 Personen", vn: "Ch·ªó ngh·ªâ qua ƒë√™m cho t·ªëi ƒëa 64 ng∆∞·ªùi.", o: ["ch·ªó ngh·ªâ qua ƒë√™m", "b·ªØa ƒÉn", "v√© xe", "v√© m√°y bay"], a: 0},
            {w: "das Einzelzimmer", f: "das Einzelzimmer, -", e: "26 ______ und 19 Doppelzimmer", full: "26 Einzelzimmer und 19 Doppelzimmer", vn: "26 ph√≤ng ƒë∆°n v√† 19 ph√≤ng ƒë√¥i.", o: ["ph√≤ng ƒë∆°n", "ph√≤ng ƒë√¥i", "ph√≤ng gia ƒë√¨nh", "ph√≤ng h·ªçp"], a: 0},
            {w: "das Doppelzimmer", f: "das Doppelzimmer, -", e: "26 Einzelzimmer und 19 ______ , auf Wunsch mit oder ohne Fr√ºhst√ºck.", full: "26 Einzelzimmer und 19 Doppelzimmer, auf Wunsch mit oder ohne Fr√ºhst√ºck.", vn: "26 ph√≤ng ƒë∆°n v√† 19 ph√≤ng ƒë√¥i, c√≥ th·ªÉ c√≥ ho·∫∑c kh√¥ng c√≥ b·ªØa s√°ng t√πy √Ω.", o: ["ph√≤ng ƒë√¥i", "ph√≤ng ƒë∆°n", "ph√≤ng gia ƒë√¨nh", "ph√≤ng h·ªçp"], a: 0},
            {w: "das WC", f: "das WC, -s", e: "Alle Zimmer mit Dusche, ______ und TV.", full: "Alle Zimmer mit Dusche, WC und TV.", vn: "T·∫•t c·∫£ ph√≤ng ƒë·ªÅu c√≥ v√≤i sen, nh√† v·ªá sinh v√† TV.", o: ["nh√† v·ªá sinh", "v√≤i sen", "TV", "gi∆∞·ªùng"], a: 0},
            {w: "die Halbpension", f: "die Halbpension (Sg.)", e: "______ oder Vollpension m√∂glich!", full: "Halbpension oder Vollpension m√∂glich!", vn: "C√≥ th·ªÉ ƒÉn n·ª≠a b·ªØa ho·∫∑c ƒÉn ƒë·∫ßy ƒë·ªß!", o: ["ƒÉn n·ª≠a b·ªØa", "ƒÉn ƒë·∫ßy ƒë·ªß", "kh√¥ng ƒÉn", "ƒÉn s√°ng"], a: 0},
            {w: "die Vollpension", f: "die Vollpension (Sg.)", e: "Halbpension oder ______ m√∂glich!", full: "Halbpension oder Vollpension m√∂glich!", vn: "C√≥ th·ªÉ ƒÉn n·ª≠a b·ªØa ho·∫∑c ƒÉn ƒë·∫ßy ƒë·ªß!", o: ["ƒÉn ƒë·∫ßy ƒë·ªß", "ƒÉn n·ª≠a b·ªØa", "kh√¥ng ƒÉn", "ƒÉn s√°ng"], a: 0},
            {w: "der Fitnessraum", f: "der Fitnessraum, -e", e: "Die Benutzung von ______ , Sauna und Schwimmbad ist inklusive.", full: "Die Benutzung von Fitnessraum, Sauna und Schwimmbad ist inklusive.", vn: "D√πng ph√≤ng gym, sauna v√† b·ªÉ b∆°i ƒë·ªÅu mi·ªÖn ph√≠.", o: ["ph√≤ng gym", "sauna", "b·ªÉ b∆°i", "qu√°n bar"], a: 0},
            {w: "die Sauna", f: "die Sauna, -s", e: "Die Benutzung von Fitnessraum, ______ und Schwimmbad ist inklusive.", full: "Die Benutzung von Fitnessraum, Sauna und Schwimmbad ist inklusive.", vn: "D√πng ph√≤ng gym, sauna v√† b·ªÉ b∆°i ƒë·ªÅu mi·ªÖn ph√≠.", o: ["sauna", "ph√≤ng gym", "b·ªÉ b∆°i", "qu√°n bar"], a: 0},
            {w: "inklusive", f: "inklusive", e: "Die Benutzung von Fitnessraum, Sauna und Schwimmbad ist ______ .", full: "Die Benutzung von Fitnessraum, Sauna und Schwimmbad ist inklusive.", vn: "D√πng ph√≤ng gym, sauna v√† b·ªÉ b∆°i ƒë·ªÅu mi·ªÖn ph√≠.", o: ["mi·ªÖn ph√≠", "t√≠nh th√™m", "kh√¥ng c√≥", "ƒë·∫Øt ƒë·ªè"], a: 0},
            {w: "der Zugang", f: "der Zugang, -e", e: "Der Internet______ ist kostenlos.", full: "Der Internetzugang ist kostenlos.", vn: "WiFi mi·ªÖn ph√≠.", o: ["truy c·∫≠p", "m·∫≠t kh·∫©u", "t·ªëc ƒë·ªô", "thi·∫øt b·ªã"], a: 0},
            {w: "reservieren", f: "reservieren, hat reserviert", e: "M√∂chten Sie ein Zimmer ______ ?", full: "M√∂chten Sie ein Zimmer reservieren?", vn: "B·∫°n mu·ªën ƒë·∫∑t ph√≤ng kh√¥ng?", o: ["ƒë·∫∑t", "h·ªßy", "thay ƒë·ªïi", "ki·ªÉm tra"], a: 0},
            {w: "die Rezeption", f: "die Rezeption, -en", e: "Oder Sie rufen unsere ______ an.", full: "Oder Sie rufen unsere Rezeption an.", vn: "Ho·∫∑c g·ªçi cho qu·∫ßy l·ªÖ t√¢n.", o: ["qu·∫ßy l·ªÖ t√¢n", "ph√≤ng ng·ªß", "nh√† h√†ng", "b·ªÉ b∆°i"], a: 0},
            {w: "die Ferienwohnung", f: "die Ferienwohnung, -en", e: "Sch√∂ne, ruhige ______ am Ortsrand von Krassenstein.", full: "Sch√∂ne, ruhige Ferienwohnung am Ortsrand von Krassenstein.", vn: "CƒÉn h·ªô ngh·ªâ d∆∞·ª°ng ƒë·∫πp, y√™n tƒ©nh ·ªü ngo·∫°i √¥ Krassenstein.", o: ["cƒÉn h·ªô ngh·ªâ d∆∞·ª°ng", "kh√°ch s·∫°n", "nh√† ngh·ªâ", "nh√† ri√™ng"], a: 0},
            {w: "die K√ºchenzeile", f: "die K√ºchenzeile, -n", e: "Ferienwohnung: 35 qm im Dachgeschoss; mit Doppelbett, ______ , Badezimmer (Dusche und WC).", full: "Ferienwohnung: 35 qm im Dachgeschoss; mit Doppelbett, K√ºchenzeile, Badezimmer (Dusche und WC).", vn: "CƒÉn h·ªô ngh·ªâ d∆∞·ª°ng: 35 m¬≤ tr√™n t·∫ßng √°p m√°i; c√≥ gi∆∞·ªùng ƒë√¥i, b·∫øp nh·ªè, ph√≤ng t·∫Øm (v√≤i sen v√† WC).", o: ["b·∫øp nh·ªè", "ph√≤ng ng·ªß", "ph√≤ng kh√°ch", "ban c√¥ng"], a: 0},
            {w: "die Pension", f: "die Pension, -en", e: "Art der Unterkunft: ______", full: "Art der Unterkunft: Pension", vn: "Lo·∫°i ch·ªó ·ªü: Nh√† ngh·ªâ.", o: ["nh√† ngh·ªâ", "kh√°ch s·∫°n", "hostel", "cƒÉn h·ªô"], a: 0},
            {w: "die Jugendherberge", f: "die Jugendherberge, -n", e: "Art der Unterkunft: ______ / Hostel", full: "Art der Unterkunft: Jugendherberge / Hostel", vn: "Lo·∫°i ch·ªó ·ªü: Nh√† ngh·ªâ thanh ni√™n / Hostel.", o: ["nh√† ngh·ªâ thanh ni√™n", "kh√°ch s·∫°n", "cƒÉn h·ªô", "nh√† ri√™ng"], a: 0},
            {w: "das Hostel", f: "das Hostel, -s", e: "Art der Unterkunft: Jugendherberge / ______", full: "Art der Unterkunft: Jugendherberge / Hostel", vn: "Lo·∫°i ch·ªó ·ªü: Nh√† ngh·ªâ thanh ni√™n / Hostel.", o: ["hostel", "kh√°ch s·∫°n", "nh√† ngh·ªâ", "cƒÉn h·ªô"], a: 0},
            {w: "die Verpflegung", f: "die Verpflegung (Sg.)", e: "______ : Fr√ºhst√ºck", full: "Verpflegung: Fr√ºhst√ºck", vn: "ƒÇn u·ªëng: B·ªØa s√°ng.", o: ["ƒÉn u·ªëng", "ng·ªß ngh·ªâ", "gi·∫∑t ·ªßi", "wifi"], a: 0},
            {w: "das Mehrbettzimmer", f: "das Mehrbettzimmer, -", e: "Zimmertyp: ______", full: "Zimmertyp: Mehrbettzimmer", vn: "Lo·∫°i ph√≤ng: Ph√≤ng nhi·ªÅu gi∆∞·ªùng.", o: ["ph√≤ng nhi·ªÅu gi∆∞·ªùng", "ph√≤ng ƒë∆°n", "ph√≤ng ƒë√¥i", "ph√≤ng gia ƒë√¨nh"], a: 0},
            {w: "der Nichtraucher", f: "der Nichtraucher, -", e: "Zimmertyp: ______ zimmer", full: "Zimmertyp: Nichtraucherzimmer", vn: "Lo·∫°i ph√≤ng: Ph√≤ng kh√¥ng h√∫t thu·ªëc.", o: ["ph√≤ng kh√¥ng h√∫t thu·ªëc", "ph√≤ng h√∫t thu·ªëc", "ph√≤ng gia ƒë√¨nh", "ph√≤ng ƒë∆°n"], a: 0},
            {w: "das WLAN", f: "das WLAN, -s", e: "Extras: ______", full: "Extras: WLAN", vn: "Ti·ªán √≠ch th√™m: WiFi.", o: ["wifi", "b·ªØa s√°ng", "b√£i ƒë·ªó xe", "thang m√°y"], a: 0}
        ];

        let currentQuestion = 0;
        let score = 0;

        const positiveFeedback = ["Gut gemacht!", "Sehr gut!", "Super!", "Toll!", "Weiter so!", "Prima!", "Genau richtig!"];
        const negativeFeedback = ["Leider falsch!", "Noch nicht richtig!", "Versuch es noch einmal!", "Nicht ganz richtig!", "Schade!", "Falsch!"];

        function speakGerman(text) {
            if ('speechSynthesis' in window) {
                const utterance = new SpeechSynthesisUtterance(text);
                utterance.lang = 'de-DE';
                utterance.rate = 0.9;
                utterance.volume = 0.9;
                const voices = speechSynthesis.getVoices();
                const deVoice = voices.find(v => v.lang.startsWith('de-'));
                if (deVoice) utterance.voice = deVoice;
                speechSynthesis.cancel();
                speechSynthesis.speak(utterance);
            }
        }

        function startApp() {
            currentQuestion = 0;
            score = 0;
            document.getElementById("start-screen").style.display = "none";
            document.getElementById("end-screen").style.display = "none";
            document.getElementById("quiz-ui").style.display = "block";
            showQuestion();
        }

        function showQuestion() {
            if (currentQuestion >= vocabData.length) {
                showResult();
                return;
            }
            const q = vocabData[currentQuestion];
            const options = [...q.o];
            const correctAnswer = q.a;
            const shuffledOptions = shuffleArray(options);
            const newCorrectIndex = shuffledOptions.indexOf(q.o[correctAnswer]);

            document.getElementById("stat").textContent = `Frage ${currentQuestion + 1} von ${vocabData.length}`;
            document.getElementById("w").textContent = q.w;
            document.getElementById("i").textContent = q.f;
            document.getElementById("e").innerHTML = q.e.replace(/______/g, "___");
            document.getElementById("example-full").style.display = "none";

            const optsDiv = document.getElementById("opts");
            optsDiv.innerHTML = "";
            shuffledOptions.forEach((opt, idx) => {
                const btn = document.createElement("button");
                btn.className = "opt-btn";
                btn.textContent = opt;
                btn.onclick = () => handleClick(idx, btn, q, newCorrectIndex);
                optsDiv.appendChild(btn);
            });

            document.getElementById("feedback").textContent = "";
            document.getElementById("next-btn").style.display = "none";
        }

        function shuffleArray(array) {
            const newArray = [...array];
            for (let i = newArray.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [newArray[i], newArray[j]] = [newArray[j], newArray[i]];
            }
            return newArray;
        }

        function handleClick(selectedIdx, btn, q, correctIndex) {
            const allBtns = document.querySelectorAll(".opt-btn");
            if (allBtns[0].disabled) return;

            allBtns.forEach(b => b.disabled = true);

            if (selectedIdx === correctIndex) {
                score++;
                const msg = positiveFeedback[Math.floor(Math.random() * positiveFeedback.length)];
                document.getElementById("feedback").textContent = msg;
                document.getElementById("feedback").style.color = "#27ae60";
                btn.classList.add("correct");
                speakGerman("Richtig!");
                setTimeout(() => {
                    speakGerman(q.f);
                    document.getElementById("full-de").textContent = q.full;
                    document.getElementById("example-vn").textContent = q.vn;
                    document.getElementById("example-full").style.display = "block";
                }, 1800);
            } else {
                const msg = negativeFeedback[Math.floor(Math.random() * negativeFeedback.length)];
                document.getElementById("feedback").textContent = msg;
                document.getElementById("feedback").style.color = "#e74c3c";
                btn.classList.add("wrong");
                allBtns[correctIndex].classList.add("highlight");
                speakGerman("Falsch!");
                setTimeout(() => {
                    speakGerman(q.f);
                }, 1800);
            }

            document.getElementById("next-btn").style.display = "block";
        }

        function nextQuestion() {
            currentQuestion++;
            showQuestion();
        }

        function showResult() {
            document.getElementById("quiz-ui").style.display = "none";
            document.getElementById("end-screen").style.display = "block";
            const percent = Math.round((score / vocabData.length) * 100);
            let comment = percent >= 85 ? "Ausgezeichnet! üåü" : percent >= 70 ? "Sehr gut! üëç" : percent >= 50 ? "Gut ‚Äì weiter √ºben! üí™" : "N√§chstes Mal besser! üòä";
            document.getElementById("score").innerHTML = `Du hast <strong>${score}/${vocabData.length}</strong> richtig!<br>(${percent} %)<br><br>${comment}`;
        }

        function restartQuiz() {
            startApp();
        }
    </script>
</body>
</html>
