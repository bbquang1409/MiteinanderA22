<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Deutsch Lektion 8 - Pekka: Unterwegs</title>
    <style>
        body {
            font-family: system-ui, -apple-system, sans-serif;
            background: linear-gradient(135deg, #f0f3f9, #e0e7ff);
            margin: 0;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 15px;
            box-sizing: border-box;
        }
        .quiz-card {
            background: white;
            width: 100%;
            max-width: 540px;
            padding: 28px;
            border-radius: 24px;
            box-shadow: 0 15px 50px rgba(0,0,0,0.15);
            text-align: center;
        }
        .flag {
            width: 100px; height: 60px;
            margin: 0 auto 20px;
            display: flex; flex-direction: column;
            border: 1px solid #ccc; border-radius: 5px; overflow: hidden;
        }
        .f-b { background: #000; flex: 1; }
        .f-r { background: #d00; flex: 1; }
        .f-g { background: #ff0; flex: 1; }
        h2 { color: #6c5ce7; margin: 0 0 10px; font-size: 2.1rem; }
        .subtitle { color: #555; margin-bottom: 28px; font-size: 1.1rem; }
        .word-de { font-size: 2.3rem; color: #6c5ce7; font-weight: 700; margin: 15px 0; }
        .info-de { color: #e67e22; font-size: 1.1rem; font-style: italic; margin: 8px 0 18px; }
        .example-de {
            background: #f8fbff; padding: 16px; border-radius: 14px;
            margin: 18px 0 24px; text-align: left;
            border-left: 6px solid #6c5ce7; font-size: 1.05rem; line-height: 1.45;
        }
        .opt-btn {
            width: 100%; background: #fff; border: 2px solid #e0e0e0;
            padding: 14px 16px; border-radius: 12px; margin: 8px 0;
            font-size: 1.1rem; font-weight: 600; cursor: pointer;
            transition: all 0.25s; text-align: left;
        }
        .opt-btn:hover:not(:disabled) { border-color: #6c5ce7; background: #f8f5ff; }
        .opt-btn:disabled { opacity: 0.75; cursor: not-allowed; }
        .main-btn {
            width: 100%; padding: 16px; background: #6c5ce7; color: white;
            border: none; border-radius: 14px; font-size: 1.15rem; font-weight: bold;
            cursor: pointer; margin-top: 12px;
        }
        #feedback { font-size: 1.25rem; font-weight: bold; margin: 18px 0 10px; min-height: 35px; }
        #example-full { 
            margin: 15px 0; 
            padding: 15px; 
            background: #f0fff0; 
            border-radius: 12px; 
            font-size: 1.05rem; 
            text-align: left; 
            display: none; 
            border: 1px solid #c8e6c9;
        }
        #full-de { font-weight: bold; }
        #example-vn { 
            margin-top: 10px; 
            color: #444; 
            font-style: italic;
        }
        #stat, #score { font-size: 0.95rem; color: #666; margin-bottom: 12px; }
        .correct { background: #e8f5e9 !important; border-color: #4caf50 !important; color: #1b5e20; }
        .wrong { background: #ffebee !important; border-color: #e53935 !important; color: #b71c1c; }
        .highlight { background: #e8f5e9 !important; border-color: #4caf50 !important; font-weight: bold; cursor: pointer !important; }
    </style>
</head>
<body>
    <div class="quiz-card">
        <div id="start-screen">
            <div class="flag">
                <div class="f-b"></div><div class="f-r"></div><div class="f-g"></div>
            </div>
            <h2>Lektion 8</h2>
            <div class="subtitle">Pekka â€“ Unterwegs</div>
            <button class="main-btn" onclick="startApp()">STARTEN</button>
        </div>
        <div id="quiz-ui" style="display:none">
            <div id="stat"></div>
            <div class="word-de" id="w"></div>
            <div class="info-de" id="i"></div>
            <div class="example-de" id="e"></div>
            <div id="opts"></div>
            <div id="feedback"></div>
            <div id="example-full">
                <strong>CÃ¢u Ä‘áº§y Ä‘á»§:</strong> <span id="full-de"></span><br>
                <span id="example-vn"></span>
            </div>
            <button id="next-btn" class="main-btn" style="display:none" onclick="nextQuestion()">WEITER</button>
        </div>
        <div id="end-screen" style="display:none">
            <h2 style="color:#27ae60">Fertig!</h2>
            <div id="score"></div>
            <button class="main-btn" onclick="restartQuiz()">NOCHMAL</button>
        </div>
    </div>

    <script>
        const vocabData = [
            {w: "der Stress", f: "der Stress (Sg.)", e: "Ich glaube, Pekka hat ______ .", full: "Ich glaube, Pekka hat Stress.", vn: "MÃ¬nh nghÄ© Pekka Ä‘ang stress láº¯m.", o: ["stress", "vui váº»", "bÃ¬nh tÄ©nh", "má»‡t má»i"], a: 0},
            {w: "die Fahrt", f: "die Fahrt, -en", e: "Wie lange dauert die ______ ?", full: "Wie lange dauert die Fahrt?", vn: "Chuyáº¿n Ä‘i máº¥t bao lÃ¢u váº­y?", o: ["chuyáº¿n Ä‘i", "chuyáº¿n bay", "chuyáº¿n tÃ u", "chuyáº¿n xe"], a: 0},
            {w: "die Dauer", f: "die Dauer (Sg.)", e: "Wie lange ist die ______ ?", full: "Wie lange ist die Fahrdauer?", vn: "Thá»i gian Ä‘i máº¥t bao lÃ¢u?", o: ["thá»i gian", "khoáº£ng cÃ¡ch", "tá»‘c Ä‘á»™", "giÃ¡ vÃ©"], a: 0},
            {w: "die Abfahrt", f: "die Abfahrt, -en", e: "Die ______ in Neuberg ist um 9:22 Uhr.", full: "Die Abfahrt in Neuberg ist um 9:22 Uhr.", vn: "Chuyáº¿n khá»Ÿi hÃ nh á»Ÿ Neuberg lÃºc 9:22.", o: ["khá»Ÿi hÃ nh", "Ä‘áº¿n nÆ¡i", "dá»«ng", "trá»…"], a: 0},
            {w: "die Ankunft", f: "die Ankunft (Sg.)", e: "Die ______ in Krassenstein ist um 11:36 Uhr.", full: "Die Ankunft in Krassenstein ist um 11:36 Uhr.", vn: "Äáº¿n Krassenstein lÃºc 11:36.", o: ["Ä‘áº¿n nÆ¡i", "khá»Ÿi hÃ nh", "dá»«ng", "trá»…"], a: 0},
            {w: "der Zug", f: "der Zug, -e", e: "Hey, Wilma, such mir eine Bahnverbindung von Neuberg nach Krassenstein mit dem ______ .", full: "Hey, Wilma, such mir eine Bahnverbindung von Neuberg nach Krassenstein mit dem Zug.", vn: "NÃ y Wilma, tÃ¬m giÃºp mÃ¬nh chuyáº¿n tÃ u tá»« Neuberg Ä‘áº¿n Krassenstein nhÃ©.", o: ["tÃ u", "xe buÃ½t", "mÃ¡y bay", "xe hÆ¡i"], a: 0},
            {w: "das Gleis", f: "das Gleis, -e", e: "Der Zug fÃ¤hrt in Neuberg von ______ 3 ab.", full: "Der Zug fÃ¤hrt in Neuberg von Gleis 3 ab.", vn: "TÃ u khá»Ÿi hÃ nh á»Ÿ Neuberg tá»« ray sá»‘ 3.", o: ["ray", "ga", "vÃ©", "hÃ nh lÃ½"], a: 0},
            {w: "die Verbindung", f: "die Verbindung, -en", e: "Hey, Wilma, such mir eine Bahn______ von Neuberg nach Krassenstein.", full: "Hey, Wilma, such mir eine Bahnverbindung von Neuberg nach Krassenstein.", vn: "NÃ y Wilma, tÃ¬m giÃºp mÃ¬nh chuyáº¿n tÃ u tá»« Neuberg Ä‘áº¿n Krassenstein nhÃ©.", o: ["chuyáº¿n tÃ u", "vÃ© tÃ u", "ga tÃ u", "hÃ nh lÃ½"], a: 0},
            {w: "die Pflanze", f: "die Pflanze, -n", e: "Wohin sollen wir die groÃŸe ______ stellen?", full: "Wohin sollen wir die groÃŸe Pflanze stellen?", vn: "CÃ¡i cÃ¢y to nÃ y Ä‘á»ƒ Ä‘Ã¢u Ä‘Ã¢y?", o: ["cÃ¢y", "bÃ¬nh", "gháº¿", "bÃ n"], a: 0},
            {w: "der Zettel", f: "der Zettel, -", e: "Leg den ______ unter das Buch.", full: "Leg den Zettel unter das Buch.", vn: "Äáº·t tá» giáº¥y dÆ°á»›i cuá»‘n sÃ¡ch.", o: ["tá» giáº¥y", "cuá»‘n sÃ¡ch", "cÃ¡i bÃºt", "cÃ¡i káº¹p"], a: 0},
            {w: "aufteilen", f: "aufteilen, hat aufgeteilt", e: "Und wie habt ihr die Zimmer ______ ?", full: "Und wie habt ihr die Zimmer aufgeteilt?", vn: "Váº­y cÃ¡c báº¡n chia phÃ²ng tháº¿ nÃ o?", o: ["chia", "mua", "bÃ¡n", "thuÃª"], a: 0},
            {w: "das Kinderzimmer", f: "das Kinderzimmer, -", e: "Wohnzimmer, Schlafzimmer, ______ und mir.", full: "Wohnzimmer, Schlafzimmer, Kinderzimmer und mir.", vn: "PhÃ²ng khÃ¡ch, phÃ²ng ngá»§, phÃ²ng tráº» con vÃ  phÃ²ng cá»§a tÃ´i.", o: ["phÃ²ng tráº» con", "phÃ²ng báº¿p", "phÃ²ng táº¯m", "phÃ²ng lÃ m viá»‡c"], a: 0},
            {w: "das Arbeitszimmer", f: "das Arbeitszimmer, -", e: "Wohnzimmer, Schlafzimmer, Kinderzimmer und ______ .", full: "Wohnzimmer, Schlafzimmer, Kinderzimmer und Arbeitszimmer.", vn: "PhÃ²ng khÃ¡ch, phÃ²ng ngá»§, phÃ²ng tráº» con vÃ  phÃ²ng lÃ m viá»‡c.", o: ["phÃ²ng lÃ m viá»‡c", "phÃ²ng tráº» con", "phÃ²ng báº¿p", "phÃ²ng táº¯m"], a: 0},
            {w: "die Ruhe", f: "die Ruhe (Sg.)", e: "Ein Raum, wo man mal in ______ nachdenken kann.", full: "Ein Raum, wo man mal in Ruhe nachdenken kann.", vn: "Má»™t phÃ²ng Ä‘á»ƒ ngá»“i yÃªn tÄ©nh suy nghÄ©.", o: ["yÃªn tÄ©nh", "á»“n Ã o", "vui váº»", "buá»“n"], a: 0},
            {w: "nachdenken", f: "nachdenken, hat nachgedacht", e: "Ein Raum, wo man mal in Ruhe ______ kann.", full: "Ein Raum, wo man mal in Ruhe nachdenken kann.", vn: "Má»™t phÃ²ng Ä‘á»ƒ ngá»“i yÃªn tÄ©nh suy nghÄ©.", o: ["suy nghÄ©", "ngá»§", "Äƒn", "chÆ¡i"], a: 0},
            {w: "zeichnen", f: "zeichnen, hat gezeichnet", e: "Enrico muss fÃ¼r seine Arbeit oft GartenplÃ¤ne ______ .", full: "Enrico muss fÃ¼r seine Arbeit oft GartenplÃ¤ne zeichnen.", vn: "Enrico pháº£i váº½ káº¿ hoáº¡ch vÆ°á»n nhiá»u cho cÃ´ng viá»‡c.", o: ["váº½", "viáº¿t", "Ä‘á»c", "nÃ³i"], a: 0},
            {w: "wahrscheinlich", f: "wahrscheinlich", e: "Und ich brauche das Arbeitszimmer jetzt ______ auch bald.", full: "Und ich brauche das Arbeitszimmer jetzt wahrscheinlich auch bald.", vn: "VÃ  cháº¯c mÃ¬nh cÅ©ng cáº§n phÃ²ng lÃ m viá»‡c sá»›m thÃ´i.", o: ["cháº¯c cháº¯n", "cÃ³ láº½", "khÃ´ng", "chÆ°a"], a: 0},
            {w: "klappen", f: "klappen, hat geklappt", e: "Hat das mit deiner Bewerbung ______ ?", full: "Hat das mit deiner Bewerbung geklappt?", vn: "Viá»‡c xin viá»‡c cá»§a báº¡n cÃ³ Ä‘Æ°á»£c khÃ´ng?", o: ["Ä‘Æ°á»£c", "khÃ´ng Ä‘Æ°á»£c", "chÆ°a", "Ä‘ang"], a: 0},
            {w: "die Chance", f: "die Chance, -n", e: "Es ist noch nicht ganz sicher, aber meine ______ sind sehr, sehr gut!", full: "Es ist noch nicht ganz sicher, aber meine Chancen sind sehr, sehr gut!", vn: "ChÆ°a cháº¯c cháº¯n hoÃ n toÃ n nhÆ°ng cÆ¡ há»™i cá»§a mÃ¬nh tá»‘t láº¯m!", o: ["cÆ¡ há»™i", "thá»i gian", "tiá»n báº¡c", "sá»©c khá»e"], a: 0},
            {w: "die Hauptsache", f: "die Hauptsache (Sg.)", e: "Aber die ______ ist: Ihr habt endlich eine Wohnung gefunden.", full: "Aber die Hauptsache ist: Ihr habt endlich eine Wohnung gefunden.", vn: "NhÆ°ng Ä‘iá»u chÃ­nh lÃ : CÃ¡c báº¡n cuá»‘i cÃ¹ng cÅ©ng tÃ¬m Ä‘Æ°á»£c nhÃ  rá»“i.", o: ["Ä‘iá»u chÃ­nh", "Ä‘iá»u phá»¥", "tiá»n báº¡c", "thá»i gian"], a: 0},
            {w: "die GrÃ¶ÃŸe", f: "die GrÃ¶ÃŸe, -n", e: "Wohnungs______: 75 mÂ²", full: "WohnungsgrÃ¶ÃŸe: 75 mÂ²", vn: "Diá»‡n tÃ­ch nhÃ : 75 mÂ²", o: ["diá»‡n tÃ­ch", "giÃ¡ tiá»n", "vá»‹ trÃ­", "phÃ²ng"], a: 0},
            {w: "eigen", f: "eigen", e: "Alma bekommt ein ______ Kinderzimmer.", full: "Alma bekommt ein eigenes Kinderzimmer.", vn: "Alma cÃ³ phÃ²ng riÃªng cho tráº» con.", o: ["riÃªng", "chung", "lá»›n", "nhá»"], a: 0},
            {w: "modern", f: "modern", e: "Die Wohnung ist ______ .", full: "Die Wohnung ist modern.", vn: "CÄƒn nhÃ  hiá»‡n Ä‘áº¡i láº¯m.", o: ["hiá»‡n Ä‘áº¡i", "cá»• Ä‘iá»ƒn", "cÅ© ká»¹", "báº©n"], a: 0},
            {w: "preiswert", f: "preiswert", e: "Die Wohnung ist ______ .", full: "Die Wohnung ist preiswert.", vn: "CÄƒn nhÃ  giÃ¡ ráº» Ä‘áº¥y.", o: ["giÃ¡ ráº»", "Ä‘áº¯t", "miá»…n phÃ­", "cao cáº¥p"], a: 0},
            {w: "zentral", f: "zentral", e: "Die Wohnung liegt ______ .", full: "Die Wohnung liegt zentral.", vn: "CÄƒn nhÃ  náº±m vá»‹ trÃ­ trung tÃ¢m.", o: ["trung tÃ¢m", "ngoáº¡i Ã´", "xa xÃ´i", "gáº§n sÃ´ng"], a: 0},
            {w: "das Erdgeschoss", f: "das Erdgeschoss, -e", e: "Die Wohnung liegt im ______ .", full: "Die Wohnung liegt im Erdgeschoss.", vn: "CÄƒn nhÃ  á»Ÿ táº§ng trá»‡t.", o: ["táº§ng trá»‡t", "táº§ng láº§u", "táº§ng Ã¡p mÃ¡i", "táº§ng háº§m"], a: 0},
            {w: "erreichen", f: "erreichen, hat erreicht", e: "Die Wohnung ______ man mit einem Lift.", full: "Die Wohnung erreicht man mit einem Lift.", vn: "Äáº¿n cÄƒn nhÃ  báº±ng thang mÃ¡y.", o: ["Ä‘áº¿n", "rá»i", "má»Ÿ", "Ä‘Ã³ng"], a: 0},
            {w: "der Lift", f: "der Lift, -e", e: "Die Wohnung erreicht man mit einem ______ .", full: "Die Wohnung erreicht man mit einem Lift.", vn: "Äáº¿n cÄƒn nhÃ  báº±ng thang mÃ¡y.", o: ["thang mÃ¡y", "cáº§u thang", "xe hÆ¡i", "xe Ä‘áº¡p"], a: 0},
            {w: "die Garage", f: "die Garage, -n", e: "Die Wohnung hat eine ______ .", full: "Die Wohnung hat eine Garage.", vn: "CÄƒn nhÃ  cÃ³ gara.", o: ["gara", "sÃ¢n vÆ°á»n", "ban cÃ´ng", "háº§m"], a: 0},
            {w: "die Ãœbernachtung", f: "die Ãœbernachtung, -en", e: "______ mÃ¶glichkeiten fÃ¼r bis zu 64 Personen", full: "ÃœbernachtungsmÃ¶glichkeiten fÃ¼r bis zu 64 Personen", vn: "Chá»— nghá»‰ qua Ä‘Ãªm cho tá»‘i Ä‘a 64 ngÆ°á»i.", o: ["chá»— nghá»‰ qua Ä‘Ãªm", "bá»¯a Äƒn", "vÃ© xe", "vÃ© mÃ¡y bay"], a: 0},
            {w: "das Einzelzimmer", f: "das Einzelzimmer, -", e: "26 ______ und 19 Doppelzimmer", full: "26 Einzelzimmer und 19 Doppelzimmer", vn: "26 phÃ²ng Ä‘Æ¡n vÃ  19 phÃ²ng Ä‘Ã´i.", o: ["phÃ²ng Ä‘Æ¡n", "phÃ²ng Ä‘Ã´i", "phÃ²ng gia Ä‘Ã¬nh", "phÃ²ng há»p"], a: 0},
            {w: "das Doppelzimmer", f: "das Doppelzimmer, -", e: "26 Einzelzimmer und 19 ______ , auf Wunsch mit oder ohne FrÃ¼hstÃ¼ck.", full: "26 Einzelzimmer und 19 Doppelzimmer, auf Wunsch mit oder ohne FrÃ¼hstÃ¼ck.", vn: "26 phÃ²ng Ä‘Æ¡n vÃ  19 phÃ²ng Ä‘Ã´i, cÃ³ thá»ƒ cÃ³ hoáº·c khÃ´ng cÃ³ bá»¯a sÃ¡ng tÃ¹y Ã½.", o: ["phÃ²ng Ä‘Ã´i", "phÃ²ng Ä‘Æ¡n", "phÃ²ng gia Ä‘Ã¬nh", "phÃ²ng há»p"], a: 0},
            {w: "das WC", f: "das WC, -s", e: "Alle Zimmer mit Dusche, ______ und TV.", full: "Alle Zimmer mit Dusche, WC und TV.", vn: "Táº¥t cáº£ phÃ²ng Ä‘á»u cÃ³ vÃ²i sen, nhÃ  vá»‡ sinh vÃ  TV.", o: ["nhÃ  vá»‡ sinh", "vÃ²i sen", "TV", "giÆ°á»ng"], a: 0},
            {w: "die Halbpension", f: "die Halbpension (Sg.)", e: "______ oder Vollpension mÃ¶glich!", full: "Halbpension oder Vollpension mÃ¶glich!", vn: "CÃ³ thá»ƒ Äƒn ná»­a bá»¯a hoáº·c Äƒn Ä‘áº§y Ä‘á»§!", o: ["Äƒn ná»­a bá»¯a", "Äƒn Ä‘áº§y Ä‘á»§", "khÃ´ng Äƒn", "Äƒn sÃ¡ng"], a: 0},
            {w: "die Vollpension", f: "die Vollpension (Sg.)", e: "Halbpension oder ______ mÃ¶glich!", full: "Halbpension oder Vollpension mÃ¶glich!", vn: "CÃ³ thá»ƒ Äƒn ná»­a bá»¯a hoáº·c Äƒn Ä‘áº§y Ä‘á»§!", o: ["Äƒn Ä‘áº§y Ä‘á»§", "Äƒn ná»­a bá»¯a", "khÃ´ng Äƒn", "Äƒn sÃ¡ng"], a: 0},
            {w: "der Fitnessraum", f: "der Fitnessraum, -e", e: "Die Benutzung von ______ , Sauna und Schwimmbad ist inklusive.", full: "Die Benutzung von Fitnessraum, Sauna und Schwimmbad ist inklusive.", vn: "DÃ¹ng phÃ²ng gym, sauna vÃ  bá»ƒ bÆ¡i Ä‘á»u miá»…n phÃ­.", o: ["phÃ²ng gym", "sauna", "bá»ƒ bÆ¡i", "quÃ¡n bar"], a: 0},
            {w: "die Sauna", f: "die Sauna, -s", e: "Die Benutzung von Fitnessraum, ______ und Schwimmbad ist inklusive.", full: "Die Benutzung von Fitnessraum, Sauna und Schwimmbad ist inklusive.", vn: "DÃ¹ng phÃ²ng gym, sauna vÃ  bá»ƒ bÆ¡i Ä‘á»u miá»…n phÃ­.", o: ["sauna", "phÃ²ng gym", "bá»ƒ bÆ¡i", "quÃ¡n bar"], a: 0},
            {w: "inklusive", f: "inklusive", e: "Die Benutzung von Fitnessraum, Sauna und Schwimmbad ist ______ .", full: "Die Benutzung von Fitnessraum, Sauna und Schwimmbad ist inklusive.", vn: "DÃ¹ng phÃ²ng gym, sauna vÃ  bá»ƒ bÆ¡i Ä‘á»u miá»…n phÃ­.", o: ["miá»…n phÃ­", "tÃ­nh thÃªm", "khÃ´ng cÃ³", "Ä‘áº¯t Ä‘á»"], a: 0},
            {w: "der Zugang", f: "der Zugang, -e", e: "Der Internet______ ist kostenlos.", full: "Der Internetzugang ist kostenlos.", vn: "WiFi miá»…n phÃ­.", o: ["truy cáº­p", "máº­t kháº©u", "tá»‘c Ä‘á»™", "thiáº¿t bá»‹"], a: 0},
            {w: "reservieren", f: "reservieren, hat reserviert", e: "MÃ¶chten Sie ein Zimmer ______ ?", full: "MÃ¶chten Sie ein Zimmer reservieren?", vn: "Báº¡n muá»‘n Ä‘áº·t phÃ²ng khÃ´ng?", o: ["Ä‘áº·t", "há»§y", "thay Ä‘á»•i", "kiá»ƒm tra"], a: 0},
            {w: "die Rezeption", f: "die Rezeption, -en", e: "Oder Sie rufen unsere ______ an.", full: "Oder Sie rufen unsere Rezeption an.", vn: "Hoáº·c gá»i cho quáº§y lá»… tÃ¢n.", o: ["quáº§y lá»… tÃ¢n", "phÃ²ng ngá»§", "nhÃ  hÃ ng", "bá»ƒ bÆ¡i"], a: 0},
            {w: "die Ferienwohnung", f: "die Ferienwohnung, -en", e: "SchÃ¶ne, ruhige ______ am Ortsrand von Krassenstein.", full: "SchÃ¶ne, ruhige Ferienwohnung am Ortsrand von Krassenstein.", vn: "CÄƒn há»™ nghá»‰ dÆ°á»¡ng Ä‘áº¹p, yÃªn tÄ©nh á»Ÿ ngoáº¡i Ã´ Krassenstein.", o: ["cÄƒn há»™ nghá»‰ dÆ°á»¡ng", "khÃ¡ch sáº¡n", "nhÃ  nghá»‰", "nhÃ  riÃªng"], a: 0},
            {w: "die KÃ¼chenzeile", f: "die KÃ¼chenzeile, -n", e: "Ferienwohnung: 35 qm im Dachgeschoss; mit Doppelbett, ______ , Badezimmer (Dusche und WC).", full: "Ferienwohnung: 35 qm im Dachgeschoss; mit Doppelbett, KÃ¼chenzeile, Badezimmer (Dusche und WC).", vn: "CÄƒn há»™ nghá»‰ dÆ°á»¡ng: 35 mÂ² trÃªn táº§ng Ã¡p mÃ¡i; cÃ³ giÆ°á»ng Ä‘Ã´i, báº¿p nhá», phÃ²ng táº¯m (vÃ²i sen vÃ  WC).", o: ["báº¿p nhá»", "phÃ²ng ngá»§", "phÃ²ng khÃ¡ch", "ban cÃ´ng"], a: 0},
            {w: "die Pension", f: "die Pension, -en", e: "Art der Unterkunft: ______", full: "Art der Unterkunft: Pension", vn: "Loáº¡i chá»— á»Ÿ: NhÃ  nghá»‰.", o: ["nhÃ  nghá»‰", "khÃ¡ch sáº¡n", "hostel", "cÄƒn há»™"], a: 0},
            {w: "die Jugendherberge", f: "die Jugendherberge, -n", e: "Art der Unterkunft: ______ / Hostel", full: "Art der Unterkunft: Jugendherberge / Hostel", vn: "Loáº¡i chá»— á»Ÿ: NhÃ  nghá»‰ thanh niÃªn / Hostel.", o: ["nhÃ  nghá»‰ thanh niÃªn", "khÃ¡ch sáº¡n", "cÄƒn há»™", "nhÃ  riÃªng"], a: 0},
            {w: "das Hostel", f: "das Hostel, -s", e: "Art der Unterkunft: Jugendherberge / ______", full: "Art der Unterkunft: Jugendherberge / Hostel", vn: "Loáº¡i chá»— á»Ÿ: NhÃ  nghá»‰ thanh niÃªn / Hostel.", o: ["hostel", "khÃ¡ch sáº¡n", "nhÃ  nghá»‰", "cÄƒn há»™"], a: 0},
            {w: "die Verpflegung", f: "die Verpflegung (Sg.)", e: "______ : FrÃ¼hstÃ¼ck", full: "Verpflegung: FrÃ¼hstÃ¼ck", vn: "Ä‚n uá»‘ng: Bá»¯a sÃ¡ng.", o: ["Äƒn uá»‘ng", "ngá»§ nghá»‰", "giáº·t á»§i", "wifi"], a: 0},
            {w: "das Mehrbettzimmer", f: "das Mehrbettzimmer, -", e: "Zimmertyp: ______", full: "Zimmertyp: Mehrbettzimmer", vn: "Loáº¡i phÃ²ng: PhÃ²ng nhiá»u giÆ°á»ng.", o: ["phÃ²ng nhiá»u giÆ°á»ng", "phÃ²ng Ä‘Æ¡n", "phÃ²ng Ä‘Ã´i", "phÃ²ng gia Ä‘Ã¬nh"], a: 0},
            {w: "der Nichtraucher", f: "der Nichtraucher, -", e: "Zimmertyp: ______ zimmer", full: "Zimmertyp: Nichtraucherzimmer", vn: "Loáº¡i phÃ²ng: PhÃ²ng khÃ´ng hÃºt thuá»‘c.", o: ["phÃ²ng khÃ´ng hÃºt thuá»‘c", "phÃ²ng hÃºt thuá»‘c", "phÃ²ng gia Ä‘Ã¬nh", "phÃ²ng Ä‘Æ¡n"], a: 0},
            {w: "das WLAN", f: "das WLAN, -s", e: "Extras: ______", full: "Extras: WLAN", vn: "Tiá»‡n Ã­ch thÃªm: WiFi.", o: ["wifi", "bá»¯a sÃ¡ng", "bÃ£i Ä‘á»— xe", "thang mÃ¡y"], a: 0}
        ];

        let currentQuestion = 0;
        let score = 0;

        const positiveFeedback = ["Gut gemacht!", "Sehr gut!", "Super!", "Toll!", "Weiter so!", "Prima!", "Genau richtig!"];
        const negativeFeedback = ["Leider falsch!", "Noch nicht richtig!", "Versuch es noch einmal!", "Nicht ganz richtig!", "Schade!", "Falsch!"];

        function speakGerman(text) {
            if ('speechSynthesis' in window) {
                const utterance = new SpeechSynthesisUtterance(text);
                utterance.lang = 'de-DE';
                utterance.rate = 0.9;
                utterance.volume = 0.9;
                const voices = speechSynthesis.getVoices();
                const deVoice = voices.find(v => v.lang.startsWith('de-'));
                if (deVoice) utterance.voice = deVoice;
                speechSynthesis.cancel();
                speechSynthesis.speak(utterance);
            }
        }

        function startApp() {
            currentQuestion = 0;
            score = 0;
            document.getElementById("start-screen").style.display = "none";
            document.getElementById("end-screen").style.display = "none";
            document.getElementById("quiz-ui").style.display = "block";
            showQuestion();
        }

        function showQuestion() {
            if (currentQuestion >= vocabData.length) {
                showResult();
                return;
            }
            const q = vocabData[currentQuestion];
            const options = [...q.o];
            const correctAnswer = q.a;
            const shuffledOptions = shuffleArray(options);
            const newCorrectIndex = shuffledOptions.indexOf(q.o[correctAnswer]);

            document.getElementById("stat").textContent = `Frage ${currentQuestion + 1} von ${vocabData.length}`;
            document.getElementById("w").textContent = q.w;
            document.getElementById("i").textContent = q.f;
            document.getElementById("e").innerHTML = q.e.replace(/______/g, "___");
            document.getElementById("example-full").style.display = "none";

            const optsDiv = document.getElementById("opts");
            optsDiv.innerHTML = "";
            shuffledOptions.forEach((opt, idx) => {
                const btn = document.createElement("button");
                btn.className = "opt-btn";
                btn.textContent = opt;
                btn.onclick = () => handleClick(idx, btn, q, newCorrectIndex);
                optsDiv.appendChild(btn);
            });

            document.getElementById("feedback").textContent = "";
            document.getElementById("next-btn").style.display = "none";
        }

        function shuffleArray(array) {
            const newArray = [...array];
            for (let i = newArray.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [newArray[i], newArray[j]] = [newArray[j], newArray[i]];
            }
            return newArray;
        }

        function handleClick(selectedIdx, btn, q, correctIndex) {
            const allBtns = document.querySelectorAll(".opt-btn");
            if (allBtns[0].disabled) return;

            allBtns.forEach(b => b.disabled = true);

            if (selectedIdx === correctIndex) {
                score++;
                const msg = positiveFeedback[Math.floor(Math.random() * positiveFeedback.length)];
                document.getElementById("feedback").textContent = msg;
                document.getElementById("feedback").style.color = "#27ae60";
                btn.classList.add("correct");
                speakGerman("Richtig!");
                setTimeout(() => {
                    speakGerman(q.f);
                    document.getElementById("full-de").textContent = q.full;
                    document.getElementById("example-vn").textContent = q.vn;
                    document.getElementById("example-full").style.display = "block";
                }, 1800);
            } else {
                const msg = negativeFeedback[Math.floor(Math.random() * negativeFeedback.length)];
                document.getElementById("feedback").textContent = msg;
                document.getElementById("feedback").style.color = "#e74c3c";
                btn.classList.add("wrong");
                allBtns[correctIndex].classList.add("highlight");
                speakGerman("Falsch!");
                setTimeout(() => {
                    speakGerman(q.f);
                }, 1800);
            }

            document.getElementById("next-btn").style.display = "block";
        }

        function nextQuestion() {
            currentQuestion++;
            showQuestion();
        }

        function showResult() {
            document.getElementById("quiz-ui").style.display = "none";
            document.getElementById("end-screen").style.display = "block";
            const percent = Math.round((score / vocabData.length) * 100);
            let comment = percent >= 85 ? "Ausgezeichnet! ðŸŒŸ" : percent >= 70 ? "Sehr gut! ðŸ‘" : percent >= 50 ? "Gut â€“ weiter Ã¼ben! ðŸ’ª" : "NÃ¤chstes Mal besser! ðŸ˜Š";
            document.getElementById("score").innerHTML = `Du hast <strong>${score}/${vocabData.length}</strong> richtig!<br>(${percent} %)<br><br>${comment}`;
        }

        function restartQuiz() {
            startApp();
        }
    </script>
</body>
</html>
