<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Deutsch Lektion 4 - Der erste Arbeitstag</title>
    <style>
        body {
            font-family: system-ui, -apple-system, sans-serif;
            background: linear-gradient(135deg, #f0f3f9, #e0e7ff);
            margin: 0;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 15px;
            box-sizing: border-box;
        }
        .quiz-card {
            background: white;
            width: 100%;
            max-width: 520px;
            padding: 28px;
            border-radius: 24px;
            box-shadow: 0 15px 50px rgba(0,0,0,0.15);
            text-align: center;
        }
        .flag {
            width: 100px; height: 60px;
            margin: 0 auto 20px;
            display: flex; flex-direction: column;
            border: 1px solid #ccc; border-radius: 5px; overflow: hidden;
        }
        .f-b { background: #000; flex: 1; }
        .f-r { background: #d00; flex: 1; }
        .f-g { background: #ff0; flex: 1; }
        h2 { color: #6c5ce7; margin: 0 0 10px; font-size: 2.1rem; }
        .subtitle { color: #555; margin-bottom: 28px; font-size: 1.1rem; }
        .word-de { font-size: 2.5rem; color: #6c5ce7; font-weight: 700; margin: 15px 0; }
        .info-de { color: #e67e22; font-size: 1.15rem; font-style: italic; margin: 10px 0 20px; }
        .example-de {
            background: #f8fbff; padding: 18px; border-radius: 14px;
            margin: 20px 0 28px; text-align: left;
            border-left: 6px solid #6c5ce7; font-size: 1.1rem; line-height: 1.5;
        }
        .opt-btn {
            width: 100%; background: #fff; border: 2px solid #e0e0e0;
            padding: 16px 18px; border-radius: 14px; margin: 10px 0;
            font-size: 1.15rem; font-weight: 600; cursor: pointer;
            transition: all 0.25s; text-align: left;
        }
        .opt-btn:hover:not(:disabled) { border-color: #6c5ce7; background: #f8f5ff; }
        .opt-btn:disabled { opacity: 0.75; cursor: not-allowed; }
        .main-btn {
            width: 100%; padding: 18px; background: #6c5ce7; color: white;
            border: none; border-radius: 16px; font-size: 1.2rem; font-weight: bold;
            cursor: pointer; margin-top: 15px;
        }
        #feedback { font-size: 1.3rem; font-weight: bold; margin: 20px 0; min-height: 40px; }
        #stat, #score { font-size: 1rem; color: #666; margin-bottom: 15px; }
        .correct { background: #e8f5e9 !important; border-color: #4caf50 !important; color: #1b5e20; }
        .wrong { background: #ffebee !important; border-color: #e53935 !important; color: #b71c1c; }
        .highlight { background: #e8f5e9 !important; border-color: #4caf50 !important; font-weight: bold; cursor: pointer !important; }
    </style>
</head>
<body>
    <div class="quiz-card">
        <div id="start-screen">
            <div class="flag">
                <div class="f-b"></div><div class="f-r"></div><div class="f-g"></div>
            </div>
            <h2>Lektion 4</h2>
            <div class="subtitle">Amadou â€“ Der erste Arbeitstag</div>
            <button class="main-btn" onclick="startApp()">STARTEN</button>
        </div>
        <div id="quiz-ui" style="display:none">
            <div id="stat"></div>
            <div class="word-de" id="w"></div>
            <div class="info-de" id="i"></div>
            <div class="example-de" id="e"></div>
            <div id="opts"></div>
            <div id="feedback"></div>
            <button id="next-btn" class="main-btn" style="display:none" onclick="nextQuestion()">WEITER</button>
        </div>
        <div id="end-screen" style="display:none">
            <h2 style="color:#27ae60">Fertig!</h2>
            <div id="score"></div>
            <button class="main-btn" onclick="restartQuiz()">NOCHMAL</button>
        </div>
    </div>

    <script>
        const vocabData = [
            {w: "der / die Azubi", f: "der / die Azubi, -s", e: "Ella Kovacs und Dennis Staudte sind neue ______.", o: ["Thá»±c táº­p sinh / há»c nghá»", "NhÃ¢n viÃªn chÃ­nh thá»©c", "Quáº£n lÃ½", "KhÃ¡ch hÃ ng"], a: 0},
            {w: "die Personalchefin", f: "die Personalchefin, -nen", e: "Britta Becker ist ______ bei der Firma Ramaldt-IT.", o: ["TrÆ°á»Ÿng phÃ²ng nhÃ¢n sá»± (ná»¯)", "TrÆ°á»Ÿng phÃ²ng IT", "Thá»±c táº­p sinh", "NhÃ¢n viÃªn hÃ nh chÃ­nh"], a: 0},
            {w: "der Abteilungsleiter", f: "der Abteilungsleiter, - / die Abteilungsleiterin, -nen", e: "Sprich doch mal mit deinem ______.", o: ["TrÆ°á»Ÿng bá»™ pháº­n", "NhÃ¢n viÃªn má»›i", "Báº¡n Ä‘á»“ng nghiá»‡p", "KhÃ¡ch hÃ ng"], a: 0},
            {w: "der Anruf", f: "der Anruf, -e", e: "Ich arbeite im BÃ¼rgerbÃ¼ro und bekomme sehr viele ______.", o: ["Cuá»™c gá»i Ä‘iá»‡n thoáº¡i", "Email", "Tin nháº¯n", "Há»p máº·t"], a: 0},
            {w: "der Arbeitnehmer", f: "der Arbeitnehmer, - / die Arbeitnehmerin, -nen", e: "Die Personalchefin ist fÃ¼r alle ______ da.", o: ["NgÆ°á»i lao Ä‘á»™ng / nhÃ¢n viÃªn", "NgÆ°á»i sá»­ dá»¥ng lao Ä‘á»™ng", "Thá»±c táº­p sinh", "KhÃ¡ch hÃ ng"], a: 0},
            {w: "der Arbeitsplatz", f: "der Arbeitsplatz, -e", e: "Was ist fÃ¼r dich ein guter ______?", o: ["NÆ¡i lÃ m viá»‡c", "NhÃ  á»Ÿ", "TrÆ°á»ng há»c", "CÄƒng tin"], a: 0},
            {w: "der Bildschirm", f: "der Bildschirm, -e", e: "Der ______ ist so klein!", o: ["MÃ n hÃ¬nh", "BÃ n phÃ­m", "Chuá»™t mÃ¡y tÃ­nh", "MÃ¡y in"], a: 0},
            {w: "der Kopierer", f: "der Kopierer, -", e: "Drucker und ______ findest du im Raum 15A.", o: ["MÃ¡y photocopy", "MÃ¡y in", "MÃ¡y scan", "MÃ¡y fax"], a: 0},
            {w: "die Kaffeemaschine", f: "die Kaffeemaschine, -n", e: "Unsere ______ ist gleich hier in der KaffeekÃ¼che.", o: ["MÃ¡y pha cÃ  phÃª", "MÃ¡y lá»c nÆ°á»›c", "Tá»§ láº¡nh", "LÃ² vi sÃ³ng"], a: 0},
            {w: "die Kantine", f: "die Kantine, -n", e: "In der ______ gibt es von 12 bis 15 Uhr etwas Warmes.", o: ["CÄƒng tin cÃ´ng ty", "PhÃ²ng há»p", "PhÃ²ng nghá»‰", "NhÃ  kho"], a: 0},
            {w: "der Hausmeister", f: "der Hausmeister, - / die Hausmeisterin, -nen", e: "Wann ist der Termin mit ______ Nowak?", o: ["NgÆ°á»i quáº£n lÃ½ tÃ²a nhÃ ", "TrÆ°á»Ÿng phÃ²ng", "NhÃ¢n viÃªn IT", "Thá»±c táº­p sinh"], a: 0},
            {w: "grÃ¼nden", f: "grÃ¼nden (hat gegrÃ¼ndet)", e: "Im Jahr 2000 habe ich Ramaldt-IT ______. ", o: ["ThÃ nh láº­p / sÃ¡ng láº­p", "Mua láº¡i", "ÄÃ³ng cá»­a", "Má»Ÿ rá»™ng"], a: 0},
            {w: "weiterhelfen", f: "weiterhelfen (hat weitergeholfen)", e: "Herr Gohari hilft Ihnen gern ______. ", o: ["GiÃºp Ä‘á»¡ tiáº¿p / há»— trá»£ thÃªm", "Tá»« chá»‘i giÃºp", "Há»i láº¡i", "Im láº·ng"], a: 0},
            {w: "das Intranet", f: "das Intranet, -s", e: "Viele Informationen finden Sie Ã¼ber das ______.", o: ["Máº¡ng ná»™i bá»™ cÃ´ng ty", "Internet", "Email", "Äiá»‡n thoáº¡i"], a: 0},
            {w: "das WÃ¶rterbuch", f: "das WÃ¶rterbuch, -er", e: "Wenn ich ein Wort nicht kenne, schaue ich im ______ nach.", o: ["Tá»« Ä‘iá»ƒn", "SÃ¡ch giÃ¡o khoa", "Táº¡p chÃ­", "BÃ¡o"], a: 0},
            {w: "nachschauen", f: "nachschauen (hat nachgeschaut)", e: "Ich ______ im Online-WÃ¶rterbuch nach.", o: ["Tra cá»©u / xem láº¡i", "Viáº¿t láº¡i", "NÃ³i láº¡i", "Nghe láº¡i"], a: 0},
            {w: "der Akku", f: "der Akku, -s", e: "Wenn mein Handy-______ leer ist, lade ich mein Handy auf.", o: ["Pin (Ä‘iá»‡n thoáº¡i)", "Sáº¡c dá»± phÃ²ng", "á»” cáº¯m", "DÃ¢y cÃ¡p"], a: 0},
            {w: "unfreundlich", f: "unfreundlich", e: "Wenn meine Kollegin ______, ...", o: ["KhÃ´ng thÃ¢n thiá»‡n / khÃ³ chá»‹u", "Ráº¥t vui váº»", "HÃ i hÆ°á»›c", "ThÃ´ng minh"], a: 0},
            {w: "die Ãœberstunde", f: "die Ãœberstunde, -n", e: "Ich habe so viele ______ gemacht.", o: ["Giá» lÃ m thÃªm", "Giá» nghá»‰", "NgÃ y nghá»‰", "Ca lÃ m viá»‡c"], a: 0},
            {w: "die Bewertung", f: "die Bewertung, -en", e: "Bewertung: 4 von 5 Sternen.", o: ["Sá»± Ä‘Ã¡nh giÃ¡ / Ä‘iá»ƒm sá»‘", "Lá»i khen", "Lá»i chÃª", "Ã kiáº¿n"], a: 0},
            {w: "die Versammlung", f: "die Versammlung, -en", e: "Die nÃ¤chste Betriebs______ ist am 14. September.", o: ["Cuá»™c há»p / Ä‘áº¡i há»™i", "Buá»•i tiá»‡c", "Há»™i tháº£o", "Buá»•i Ä‘Ã o táº¡o"], a: 0},
            {w: "die Aktion", f: "die Aktion, -en", e: "Jetzt gibt es die â€žAktion Firmenfahrradâ€œ.", o: ["Chiáº¿n dá»‹ch / chÆ°Æ¡ng trÃ¬nh", "Sáº£n pháº©m", "GiÃ¡ cáº£", "Khuyáº¿n mÃ£i"], a: 0},
            {w: "stolz", f: "stolz (auf + Akk.)", e: "Wir sind so ______ auf euch!", o: ["Tá»± hÃ o (vá»)", "Buá»“n bÃ£", "Ngáº¡c nhiÃªn", "Lo láº¯ng"], a: 0},
            {w: "das Klima", f: "das Klima (Sg.) (Betriebsklima)", e: "Das Betriebs______ ist prima.", o: ["Báº§u khÃ´ng khÃ­ lÃ m viá»‡c", "Thá»i tiáº¿t", "Nhiá»‡t Ä‘á»™", "Ãp suáº¥t"], a: 0},
            {w: "prima", f: "prima", e: "Das Betriebsklima ist ______. ", o: ["Tuyá»‡t vá»i / ráº¥t tá»‘t", "Xáº¥u", "BÃ¬nh thÆ°á»ng", "KhÃ³ chá»‹u"], a: 0}
        ];

        let currentQuestion = 0;
        let score = 0;

        const positiveFeedback = ["Gut gemacht!", "Sehr gut!", "Super!", "Toll!", "Weiter so!", "Prima!", "Genau richtig!"];
        const negativeFeedback = ["Leider falsch!", "Noch nicht richtig!", "Versuch es noch einmal!", "Nicht ganz richtig!", "Schade!", "Falsch!"];

        function speakGerman(text) {
            if ('speechSynthesis' in window) {
                const utterance = new SpeechSynthesisUtterance(text);
                utterance.lang = 'de-DE';
                utterance.rate = 0.9;
                utterance.volume = 0.9;
                const voices = speechSynthesis.getVoices();
                const deVoice = voices.find(v => v.lang.startsWith('de-'));
                if (deVoice) utterance.voice = deVoice;
                speechSynthesis.cancel();
                speechSynthesis.speak(utterance);
            }
        }

        function startApp() {
            currentQuestion = 0;
            score = 0;
            document.getElementById("start-screen").style.display = "none";
            document.getElementById("end-screen").style.display = "none";
            document.getElementById("quiz-ui").style.display = "block";
            showQuestion();
        }

        function showQuestion() {
            if (currentQuestion >= vocabData.length) {
                showResult();
                return;
            }
            const q = vocabData[currentQuestion];
            const options = [...q.o];
            const correctAnswer = q.a;
            const shuffledOptions = shuffleArray(options);
            const newCorrectIndex = shuffledOptions.indexOf(q.o[correctAnswer]);

            document.getElementById("stat").textContent = `Frage ${currentQuestion + 1} von ${vocabData.length}`;
            document.getElementById("w").textContent = q.w;
            document.getElementById("i").textContent = q.f;
            document.getElementById("e").innerHTML = q.e.replace(/______/g, "___");

            const optsDiv = document.getElementById("opts");
            optsDiv.innerHTML = "";
            shuffledOptions.forEach((opt, idx) => {
                const btn = document.createElement("button");
                btn.className = "opt-btn";
                btn.textContent = opt;
                btn.onclick = () => handleClick(idx, btn, q, newCorrectIndex);
                optsDiv.appendChild(btn);
            });

            document.getElementById("feedback").textContent = "";
            document.getElementById("next-btn").style.display = "none";
        }

        function shuffleArray(array) {
            const newArray = [...array];
            for (let i = newArray.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [newArray[i], newArray[j]] = [newArray[j], newArray[i]];
            }
            return newArray;
        }

        function handleClick(selectedIdx, btn, q, correctIndex) {
            const allBtns = document.querySelectorAll(".opt-btn");
            if (allBtns[0].disabled) {
                if (selectedIdx === correctIndex) {
                    speakGerman(q.f);
                }
                return;
            }

            allBtns.forEach(b => b.disabled = true);

            if (selectedIdx === correctIndex) {
                score++;
                const msg = positiveFeedback[Math.floor(Math.random() * positiveFeedback.length)];
                document.getElementById("feedback").textContent = msg;
                document.getElementById("feedback").style.color = "#27ae60";
                btn.classList.add("correct");
                speakGerman("Richtig!");
                setTimeout(() => {
                    speakGerman(q.f);
                }, 2000);
            } else {
                const msg = negativeFeedback[Math.floor(Math.random() * negativeFeedback.length)];
                document.getElementById("feedback").textContent = msg;
                document.getElementById("feedback").style.color = "#e74c3c";
                btn.classList.add("wrong");
                allBtns[correctIndex].classList.add("highlight");
                speakGerman("Falsch!");
                setTimeout(() => {
                    speakGerman(q.f);
                }, 2000);
            }

            document.getElementById("next-btn").style.display = "block";
        }

        function nextQuestion() {
            currentQuestion++;
            showQuestion();
        }

        function showResult() {
            document.getElementById("quiz-ui").style.display = "none";
            document.getElementById("end-screen").style.display = "block";
            const percent = Math.round((score / vocabData.length) * 100);
            let comment = percent >= 85 ? "Ausgezeichnet! ðŸŒŸ" : percent >= 70 ? "Sehr gut! ðŸ‘" : percent >= 50 ? "Gut â€“ weiter Ã¼ben! ðŸ’ª" : "NÃ¤chstes Mal besser! ðŸ˜Š";
            document.getElementById("score").innerHTML = `Du hast <strong>${score}/${vocabData.length}</strong> richtig!<br>(${percent} %)<br><br>${comment}`;
        }

        function restartQuiz() {
            startApp();
        }
    </script>
</body>
</html>
