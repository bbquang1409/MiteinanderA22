<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Deutsch Lektion 3 - Joggen ist prima</title>
    <style>
        body { 
            font-family: system-ui, -apple-system, sans-serif; 
            background: linear-gradient(135deg, #f0f3f9, #e0e7ff); 
            margin: 0; 
            min-height: 100vh; 
            display: flex; 
            justify-content: center; 
            align-items: center; 
            padding: 15px; 
            box-sizing: border-box;
        }
        .quiz-card { 
            background: white; 
            width: 100%; 
            max-width: 520px; 
            padding: 28px; 
            border-radius: 24px; 
            box-shadow: 0 15px 50px rgba(0,0,0,0.15); 
            text-align: center; 
        }
        .flag { 
            width: 100px; height: 60px; 
            margin: 0 auto 20px; 
            display: flex; flex-direction: column; 
            border: 1px solid #ccc; border-radius: 5px; overflow: hidden;
        }
        .f-b { background: #000; flex: 1; } 
        .f-r { background: #d00; flex: 1; } 
        .f-g { background: #ff0; flex: 1; }
        h2 { color: #6c5ce7; margin: 0 0 10px; font-size: 2.1rem; }
        .subtitle { color: #555; margin-bottom: 28px; font-size: 1.1rem; }
        .word-de { font-size: 2.5rem; color: #6c5ce7; font-weight: 700; margin: 15px 0; }
        .info-de { color: #e67e22; font-size: 1.15rem; font-style: italic; margin: 10px 0 20px; }
        .example-de { 
            background: #f8fbff; padding: 18px; border-radius: 14px; 
            margin: 20px 0 28px; text-align: left; 
            border-left: 6px solid #6c5ce7; font-size: 1.1rem; line-height: 1.5; 
        }
        .opt-btn { 
            width: 100%; background: #fff; border: 2px solid #e0e0e0; 
            padding: 16px 18px; border-radius: 14px; margin: 10px 0; 
            font-size: 1.15rem; font-weight: 600; cursor: pointer; 
            transition: all 0.25s; text-align: left;
        }
        .opt-btn:hover:not(:disabled) { border-color: #6c5ce7; background: #f8f5ff; }
        .opt-btn:disabled { opacity: 0.75; cursor: not-allowed; }
        .main-btn { 
            width: 100%; padding: 18px; background: #6c5ce7; color: white; 
            border: none; border-radius: 16px; font-size: 1.2rem; font-weight: bold; 
            cursor: pointer; margin-top: 15px;
        }
        #feedback { font-size: 1.3rem; font-weight: bold; margin: 20px 0; min-height: 40px; }
        #stat, #score { font-size: 1rem; color: #666; margin-bottom: 15px; }
        .correct   { background: #e8f5e9 !important; border-color: #4caf50 !important; color: #1b5e20; }
        .wrong     { background: #ffebee !important; border-color: #e53935 !important; color: #b71c1c; }
        .highlight { background: #e8f5e9 !important; border-color: #4caf50 !important; font-weight: bold; cursor: pointer !important; }
    </style>
</head>
<body>
    <div class="quiz-card">
        <div id="start-screen">
            <div class="flag">
                <div class="f-b"></div><div class="f-r"></div><div class="f-g"></div>
            </div>
            <h2>Lektion 3</h2>
            <div class="subtitle">Zofia â€“ Joggen ist prima!</div>
            <button class="main-btn" onclick="startApp()">STARTEN</button>
        </div>

        <div id="quiz-ui" style="display:none">
            <div id="stat"></div>
            <div class="word-de" id="w"></div>
            <div class="info-de" id="i"></div>
            <div class="example-de" id="e"></div>
            <div id="opts"></div>
            <div id="feedback"></div>
            <button id="next-btn" class="main-btn" style="display:none" onclick="nextQuestion()">WEITER</button>
        </div>

        <div id="end-screen" style="display:none">
            <h2 style="color:#27ae60">Fertig!</h2>
            <div id="score"></div>
            <button class="main-btn" onclick="restartQuiz()">NOCHMAL</button>
        </div>
    </div>

    <script>
        const vocabData = [
            {w: "der Anrufer", f: "der Anrufer, die Anrufer", e: "Aber sie mÃ¶chte mit dem ______ joggen.", o: ["NgÆ°á»i gá»i Ä‘iá»‡n", "NgÆ°á»i nháº­n cuá»™c gá»i", "Báº¡n bÃ¨", "HÃ ng xÃ³m"], a: 0},
            {w: "die Anruferin", f: "die Anruferin, die Anruferinnen", e: "Aber sie mÃ¶chte mit dem Anrufer joggen.", o: ["NgÆ°á»i gá»i Ä‘iá»‡n (ná»¯)", "NgÆ°á»i nháº­n cuá»™c gá»i (ná»¯)", "Báº¡n bÃ¨", "HÃ ng xÃ³m"], a: 0},
            {w: "klettern", f: "klettern, ist geklettert", e: "Sie will nicht so gern ______. ", o: ["Leo trÃ¨o", "Cháº¡y bá»™", "BÆ¡i lá»™i", "Äi bá»™"], a: 0},
            {w: "vorschlagen", f: "vorschlagen, hat vorgeschlagen", e: "Darf ich etwas ______?", o: ["Äá» nghá»‹/ Gá»£i Ã½", "Tá»« chá»‘i", "Cháº¥p nháº­n", "Há»i"], a: 0},
            {w: "der Vorschlag", f: "der Vorschlag, die VorschlÃ¤ge", e: "Ich habe da einen ______. ", o: ["Äá» nghá»‹/ Gá»£i Ã½", "Ã kiáº¿n", "Káº¿ hoáº¡ch", "Lá»i khuyÃªn"], a: 0},
            {w: "zustimmen", f: "zustimmen, hat zugestimmt", e: "Sie / Er stimmt ______. ", o: ["Äá»“ng Ã½", "Tá»« chá»‘i", "Há»i láº¡i", "Im láº·ng"], a: 0},
            {w: "einverstanden", f: "einverstanden", e: "______!", o: ["Äá»“ng Ã½ nhÃ©!", "Tá»« chá»‘i", "KhÃ´ng biáº¿t", "CÃ³ láº½"], a: 0},
            {w: "Ã¼bermorgen", f: "Ã¼bermorgen", e: "Vielleicht ______. ?", o: ["NgÃ y kia", "HÃ´m nay", "NgÃ y mai", "HÃ´m qua"], a: 0},
            {w: "das Stand-up-Paddling/SUP", f: "das Stand-up-Paddling/SUP (Sg.)", e: "Was findet Pekka interessanter? Klettern oder ______?", o: ["ChÃ¨o vÃ¡n Ä‘á»©ng (SUP)", "Leo trÃ¨o", "BÆ¡i lá»™i", "Cháº¡y bá»™"], a: 0},
            {w: "das Yoga", f: "das Yoga (Sg.)", e: "Im Moment mag sie Aerial ______ am liebsten.", o: ["Yoga", "Thá»ƒ dá»¥c", "Cháº¡y bá»™", "BÆ¡i lá»™i"], a: 0},
            {w: "die Fitness", f: "die Fitness (Sg.)", e: "______training oder Joggen?", o: ["Táº­p thá»ƒ dá»¥c/ Fitness", "Yoga", "Cháº¡y bá»™", "BÆ¡i lá»™i"], a: 0},
            {w: "der Handball", f: "der Handball (Sg.)", e: "Ich mag ______ nicht so gern!", o: ["BÃ³ng nÃ©m tay", "BÃ³ng Ä‘Ã¡", "BÃ³ng chuyá»n", "BÃ³ng rá»•"], a: 0},
            {w: "der Tennis", f: "der Tennis (Sg.)", e: "______ schauen oder Filme schauen?", o: ["Quáº§n vá»£t (Tennis)", "BÃ³ng Ä‘Ã¡", "BÃ³ng chuyá»n", "BÃ³ng rá»•"], a: 0},
            {w: "springen", f: "springen, ist gesprungen", e: "Wer kann hoch ______?", o: ["Nháº£y cao", "Cháº¡y nhanh", "BÆ¡i xa", "Leo trÃ¨o"], a: 0},
            {w: "das Curry", f: "das Curry, die Currys", e: "Ich koche ______, weil ich das gerne esse.", o: ["CÃ  ri", "Phá»Ÿ", "BÃºn bÃ²", "CÆ¡m táº¥m"], a: 0},
            {w: "das Karaoke", f: "das Karaoke (Sg.)", e: "Ich mag kein ______, weil viele Leute schlecht singen.", o: ["Karaoke", "Nháº¡c sá»‘ng", "Xem phim", "Äá»c sÃ¡ch"], a: 0},
            {w: "die Langeweile", f: "die Langeweile (Sg.)", e: "Ich habe nie ______, weil ich gern und oft bastle.", o: ["Sá»± chÃ¡n náº£n", "Sá»± vui váº»", "Sá»± má»‡t má»i", "Sá»± Ä‘Ã³i"], a: 0},
            {w: "basteln", f: "basteln, hat gebastelt", e: "Ich habe nie Langeweile, weil ich gern und oft ______. ", o: ["LÃ m Ä‘á»“ thá»§ cÃ´ng", "ChÆ¡i thá»ƒ thao", "Ä‚n uá»‘ng", "Ngá»§ nghá»‰"], a: 0},
            {w: "gemÃ¼tlich", f: "gemÃ¼tlich", e: "Wir gehen gern ins CafÃ© Rosenstein, weil es dort so ______. ist.", o: ["Thoáº£i mÃ¡i, áº¥m cÃºng", "á»’n Ã o", "Láº¡nh láº½o", "NÃ³ng bá»©c"], a: 0},
            {w: "das Programm", f: "das Programm, die Programme", e: "Ich mache ein neues Fitness______. ", o: ["ChÆ°Æ¡ng trÃ¬nh/ Káº¿ hoáº¡ch", "Lá»‹ch há»c", "Danh sÃ¡ch", "Báº£ng"], a: 0},
            {w: "der Luftballon", f: "der Luftballon, die Luftballons", e: "Ich habe ______s und Kerzen gekauft, weil ich eine Party feiere.", o: ["BÃ³ng bay", "BÃ³ng bÃ n", "BÃ³ng Ä‘Ã¡", "BÃ³ng chuyá»n"], a: 0},
            {w: "die Kerze", f: "die Kerze, die Kerzen", e: "Ich habe Luftballons und ______n gekauft, weil ich eine Party feiere.", o: ["Náº¿n", "ÄÃ¨n", "ÄÃ¨n pin", "ÄÃ¨n ngá»§"], a: 0},
            {w: "die Ãœbung", f: "die Ãœbung, die Ãœbungen", e: "Wer will ______en machen?", o: ["BÃ i táº­p", "TrÃ² chÆ¡i", "BÃ i hÃ¡t", "MÃ³n Äƒn"], a: 0},
            {w: "die Spaghetti", f: "die Spaghetti (Pl.)", e: "Spaghetti schmecken genauso gut wie ...", o: ["MÃ¬ Ã (Spaghetti)", "Phá»Ÿ", "BÃºn", "CÆ¡m"], a: 0},
            {w: "abwaschen", f: "abwaschen, hat abgewaschen", e: "Abwaschen ist anstrengender als Kochen.", o: ["Rá»­a chÃ©n", "Náº¥u Äƒn", "Dá»n dáº¹p", "Giáº·t giÅ©"], a: 0},
            {w: "der Elefant", f: "der Elefant, die Elefanten", e: "Am besten haben mir die ______en gefallen.", o: ["Con voi", "Con há»•", "Con gáº¥u", "Con khá»‰"], a: 0},
            {w: "die Schlange", f: "die Schlange, die Schlangen", e: "Es gibt dort Schlangen, die sind fÃ¼nf Meter lang.", o: ["Con ráº¯n", "Con rÃ¹a", "Con cÃ¡", "Con áº¿ch"], a: 0},
            {w: "anstrengend", f: "anstrengend", e: "Deutsch lernen ist genauso ______ wie nett und hÃ¼bsch.", o: ["Má»‡t má»i", "Vui váº»", "Dá»… dÃ ng", "ThÃº vá»‹"], a: 0},
            {w: "hÃ¼bsch", f: "hÃ¼bsch", e: "Deutsch lernen ist genauso anstrengend wie nett und ______. ", o: ["Xinh Ä‘áº¹p", "Xáº¥u xÃ­", "Lá»›n", "Nhá»"], a: 0},
            {w: "das GummibÃ¤rchen", f: "das GummibÃ¤rchen, die GummibÃ¤rchen", e: "GummibÃ¤rchen schmecken genauso gut wie ...", o: ["Káº¹o dáº»o hÃ¬nh gáº¥u", "Káº¹o mÃºt", "Socola", "BÃ¡nh káº¹o"], a: 0},
            {w: "die Maus", f: "die Maus, die MÃ¤use", e: "Schlangen sind intelligenter als so gut wie ______. ", o: ["Con chuá»™t", "Con mÃ¨o", "Con chÃ³", "Con gÃ "], a: 0},
            {w: "der Typ", f: "der Typ, die Typen", e: "Welcher Sport______ sind Sie?", o: ["Kiá»ƒu ngÆ°á»i", "Loáº¡i ngÆ°á»i", "NgÆ°á»i láº¡", "Báº¡n bÃ¨"], a: 0},
            {w: "der Kontakt", f: "der Kontakt, die Kontakte", e: "MÃ¶chten Sie neue ______ knÃ¼pfen?", o: ["LiÃªn láº¡c/ Má»‘i quan há»‡", "Báº¡n bÃ¨", "Gia Ä‘Ã¬nh", "Äá»“ng nghiá»‡p"], a: 0},
            {w: "die Sportart", f: "die Sportart, die Sportarten", e: "Welche ______ passt am besten zu Ihnen?", o: ["MÃ´n thá»ƒ thao", "TrÃ² chÆ¡i", "Hoáº¡t Ä‘á»™ng", "Sá»Ÿ thÃ­ch"], a: 0},
            {w: "herausfinden", f: "herausfinden, hat herausgefunden", e: "Welche Sportart passt am besten zu Ihnen?", o: ["TÃ¬m ra", "QuÃªn", "Há»i", "NÃ³i"], a: 0},
            {w: "rausfinden", f: "rausfinden, hat rausgefunden", e: "Finden Sie es heraus!", o: ["TÃ¬m ra", "QuÃªn", "Há»i", "NÃ³i"], a: 0},
            {w: "kÃ¤mpfen", f: "kÃ¤mpfen, hat gekÃ¤mpft", e: "MÃ¶chten Sie gerne zusammen mit anderen Menschen ______ und im Team gewinnen?", o: ["Chiáº¿n Ä‘áº¥u/ Cáº¡nh tranh", "ChÆ¡i", "Ä‚n", "Ngá»§"], a: 0},
            {w: "geeignet", f: "geeignet", e: "Dann ist eine Mannschaftssportart fÃ¼r Sie am ______. ", o: ["PhÃ¹ há»£p", "KhÃ´ng phÃ¹ há»£p", "KhÃ³", "Dá»…"], a: 0},
            {w: "der Basketball", f: "der Basketball (Sg.)", e: "Zum Beispiel FuÃŸball, ______ oder Eishockey.", o: ["BÃ³ng rá»•", "BÃ³ng Ä‘Ã¡", "BÃ³ng chuyá»n", "BÃ³ng nÃ©m"], a: 0},
            {w: "das Eishockey", f: "das Eishockey (Sg.)", e: "Zum Beispiel FuÃŸball, Basketball oder ______. ", o: ["KhÃºc cÃ´n cáº§u trÃªn bÄƒng", "BÃ³ng Ä‘Ã¡", "BÃ³ng rá»•", "BÃ³ng chuyá»n"], a: 0},
            {w: "das Ziel", f: "das Ziel, die Ziele", e: "Ich brauche klare ______. ", o: ["Má»¥c tiÃªu", "Káº¿ hoáº¡ch", "Ã kiáº¿n", "Lá»i khuyÃªn"], a: 0},
            {w: "die Leichtathletik", f: "die Leichtathletik (Sg.)", e: "Dann sind vielleicht Leichtathletik-Sportarten fÃ¼r Sie am interessantesten.", o: ["Äiá»n kinh", "BÆ¡i lá»™i", "Cáº§u lÃ´ng", "Quáº§n vá»£t"], a: 0},
            {w: "werfen", f: "werfen, hat geworfen", e: "Zum Beispiel Laufen, Springen oder ______. ", o: ["NÃ©m", "Cháº¡y", "Nháº£y", "BÆ¡i"], a: 0},
            {w: "die Luft", f: "die Luft (Sg.)", e: "Ich liebe frische ______. ", o: ["KhÃ´ng khÃ­", "NÆ°á»›c", "Äáº¥t", "Lá»­a"], a: 0},
            {w: "das Studio", f: "das Studio, die Studios", e: "Fitness______s und Sporthallen mÃ¶gen Sie nicht?", o: ["PhÃ²ng táº­p gym", "SÃ¢n bÃ³ng", "NhÃ  hÃ ng", "Cá»­a hÃ ng"], a: 0},
            {w: "die Halle", f: "die Halle, die Hallen", e: "Fitnessstudios und Sporthallen mÃ¶gen Sie nicht?", o: ["SÃ¢n váº­n Ä‘á»™ng/ NhÃ  thi Ä‘áº¥u", "PhÃ²ng táº­p", "NhÃ  hÃ ng", "Cá»­a hÃ ng"], a: 0},
            {w: "drinnen", f: "drinnen", e: "Sie sind lieber drauÃŸen als ______. ?", o: ["BÃªn trong", "BÃªn ngoÃ i", "TrÃªn láº§u", "DÆ°á»›i nhÃ "], a: 0},
            {w: "die Wiese", f: "die Wiese, die Wiesen", e: "Finden Sie Parks, WÃ¤lder, Seen und ______ am schÃ¶nsten?", o: ["BÃ£i cá»", "SÃ´ng", "Há»“", "NÃºi"], a: 0},
            {w: "der Ski", f: "der Ski, die Skier", e: "Dann sind die Top-Sportarten fÃ¼r Sie Joggen, Wandern und im Winter ______. ", o: ["TrÆ°á»£t tuyáº¿t", "BÆ¡i lá»™i", "Cháº¡y bá»™", "Leo nÃºi"], a: 0},
            {w: "sich interessieren", f: "sich interessieren, hat (sich) interessiert", e: "Interessieren Sie sportliche weniger als der Kontakt zu anderen Menschen?", o: ["Quan tÃ¢m", "KhÃ´ng quan tÃ¢m", "ThÃ­ch", "GhÃ©t"], a: 0},
            {w: "sportlich", f: "sportlich", e: "Interessieren Sie ______ weniger als der Kontakt zu anderen Menschen?", o: ["Thá»ƒ thao", "Ã‚m nháº¡c", "Ä‚n uá»‘ng", "Ngá»§ nghá»‰"], a: 0},
            {w: "das Angebot", f: "das Angebot, die Angebote", e: "Angebote fÃ¼r Sie sind zum Beispiel Kochen, ______ oder Tanzen.", o: ["KhÃ³a há»c/ ChÆ°Æ¡ng trÃ¬nh", "MÃ³n Äƒn", "TrÃ² chÆ¡i", "BÃ¡nh káº¹o"], a: 0},
            {w: "das Walking", f: "das Walking (Sg.)", e: "Walking ______ oder Gymnastik-Gruppen.", o: ["Äi bá»™ nhanh", "Cháº¡y bá»™", "BÆ¡i lá»™i", "Leo trÃ¨o"], a: 0},
            {w: "die Gymnastik", f: "die Gymnastik (Sg.)", e: "Walking oder ______-Gruppen.", o: ["Thá»ƒ dá»¥c nhá»‹p Ä‘iá»‡u", "Yoga", "Thá»ƒ hÃ¬nh", "BÃ³ng Ä‘Ã¡"], a: 0},
            {w: "der Volleyball", f: "der Volleyball (Sg.)", e: "Ich bin Typ 1: Ich mag Mannschaftssportarten, z.B. ______. ", o: ["BÃ³ng chuyá»n", "BÃ³ng Ä‘Ã¡", "BÃ³ng rá»•", "BÃ³ng nÃ©m"], a: 0},
            {w: "beliebt", f: "beliebt", e: "Joggen ist am ______sten.", o: ["Phá»• biáº¿n", "Ãt phá»• biáº¿n", "KhÃ³", "Dá»…"], a: 0},
            {w: "notieren", f: "notieren, hat notiert", e: "Ich habe 'FuÃŸball' ______. ", o: ["Ghi chÃº", "QuÃªn", "NÃ³i", "Nghe"], a: 0},
            {w: "vorstellen", f: "vorstellen, hat vorgestellt", e: "Darf ich ______? Das ist ...", o: ["Giá»›i thiá»‡u", "Tá»« chá»‘i", "Cháº¥p nháº­n", "Há»i"], a: 0},
            {w: "die Kraft", f: "die Kraft, die KrÃ¤fte", e: "Mit SUP kann man ______ und Ausdauer trainieren.", o: ["Sá»©c máº¡nh", "Sá»©c bá»n", "Tá»‘c Ä‘á»™", "Ká»¹ thuáº­t"], a: 0},
            {w: "die Ausdauer", f: "die Ausdauer (Sg.)", e: "Mit SUP kann man Kraft und ______ trainieren.", o: ["Sá»©c bá»n", "Sá»©c máº¡nh", "Tá»‘c Ä‘á»™", "Ká»¹ thuáº­t"], a: 0},
            {w: "die Packung", f: "die Packung, die Packungen", e: "Isst jemand von euch vier ______en GummibÃ¤rchen am Tag?", o: ["GÃ³i/ TÃºi", "Há»™p", "Lá»", "CÃ¡i"], a: 0},
            {w: "Ã¼berall", f: "Ã¼berall", e: "Man kann Yoga ______ machen.", o: ["Kháº¯p nÆ¡i", "Má»™t nÆ¡i", "NhÃ ", "TrÆ°á»ng"], a: 0},
            {w: "der Profi", f: "der Profi, die Profis", e: "Seit fÃ¼nf Jahren ist er ______schwimmer.", o: ["Váº­n Ä‘á»™ng viÃªn chuyÃªn nghiá»‡p", "NgÆ°á»i má»›i báº¯t Ä‘áº§u", "NgÆ°á»i nghiá»‡p dÆ°", "NgÆ°á»i xem"], a: 0}
        ];

        let currentQuestion = 0;
        let score = 0;

        const positiveFeedback = ["Gut gemacht!", "Sehr gut!", "Super!", "Toll!", "Weiter so!", "Prima!", "Genau richtig!"];
        const negativeFeedback = ["Leider falsch!", "Noch nicht richtig!", "Versuch es noch einmal!", "Nicht ganz richtig!", "Schade!", "Falsch!"];

        function speakGerman(text) {
            if ('speechSynthesis' in window) {
                const utterance = new SpeechSynthesisUtterance(text);
                utterance.lang = 'de-DE';
                utterance.rate = 0.9;
                utterance.volume = 0.9;
                const voices = speechSynthesis.getVoices();
                const deVoice = voices.find(v => v.lang.startsWith('de-'));
                if (deVoice) utterance.voice = deVoice;
                speechSynthesis.cancel();
                speechSynthesis.speak(utterance);
            }
        }

        function startApp() {
            currentQuestion = 0;
            score = 0;
            document.getElementById("start-screen").style.display = "none";
            document.getElementById("end-screen").style.display = "none";
            document.getElementById("quiz-ui").style.display = "block";
            showQuestion();
        }

        function showQuestion() {
            if (currentQuestion >= vocabData.length) {
                showResult();
                return;
            }
            const q = vocabData[currentQuestion];

            // Äáº£o ngáº«u nhiÃªn thá»© tá»± Ä‘Ã¡p Ã¡n
            const options = [...q.o];
            const correctAnswer = q.a;
            const shuffledOptions = shuffleArray(options);
            const newCorrectIndex = shuffledOptions.indexOf(q.o[correctAnswer]);

            document.getElementById("stat").textContent = `Frage ${currentQuestion + 1} von ${vocabData.length}`;
            document.getElementById("w").textContent = q.w;
            document.getElementById("i").textContent = q.f;
            document.getElementById("e").innerHTML = q.e.replace(/______/g, "___");

            const optsDiv = document.getElementById("opts");
            optsDiv.innerHTML = "";
            shuffledOptions.forEach((opt, idx) => {
                const btn = document.createElement("button");
                btn.className = "opt-btn";
                btn.textContent = opt;
                btn.onclick = () => handleClick(idx, btn, q, newCorrectIndex);
                optsDiv.appendChild(btn);
            });

            document.getElementById("feedback").textContent = "";
            document.getElementById("next-btn").style.display = "none";
        }

        function shuffleArray(array) {
            const newArray = [...array];
            for (let i = newArray.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [newArray[i], newArray[j]] = [newArray[j], newArray[i]];
            }
            return newArray;
        }

        function handleClick(selectedIdx, btn, q, correctIndex) {
            const allBtns = document.querySelectorAll(".opt-btn");

            if (allBtns[0].disabled) {
                if (selectedIdx === correctIndex) {
                    speakGerman(q.f);
                }
                return;
            }

            allBtns.forEach(b => b.disabled = true);

            if (selectedIdx === correctIndex) {
                score++;
                const msg = positiveFeedback[Math.floor(Math.random() * positiveFeedback.length)];
                document.getElementById("feedback").textContent = msg;
                document.getElementById("feedback").style.color = "#27ae60";
                btn.classList.add("correct");

                speakGerman("Richtig!");

                setTimeout(() => {
                    speakGerman(q.f);
                }, 2000);
            } else {
                const msg = negativeFeedback[Math.floor(Math.random() * negativeFeedback.length)];
                document.getElementById("feedback").textContent = msg;
                document.getElementById("feedback").style.color = "#e74c3c";
                btn.classList.add("wrong");

                allBtns[correctIndex].classList.add("highlight");

                speakGerman("Falsch!");

                setTimeout(() => {
                    speakGerman(q.f);
                }, 2000);
            }

            document.getElementById("next-btn").style.display = "block";
        }

        function nextQuestion() {
            currentQuestion++;
            showQuestion();
        }

        function showResult() {
            document.getElementById("quiz-ui").style.display = "none";
            document.getElementById("end-screen").style.display = "block";
            const percent = Math.round((score / vocabData.length) * 100);
            let comment = percent >= 85 ? "Ausgezeichnet! ðŸŒŸ" : percent >= 70 ? "Sehr gut! ðŸ‘" : percent >= 50 ? "Gut â€“ weiter Ã¼ben! ðŸ’ª" : "NÃ¤chstes Mal besser! ðŸ˜Š";
            document.getElementById("score").innerHTML = `Du hast <strong>${score}/${vocabData.length}</strong> richtig!<br>(${percent} %)<br><br>${comment}`;
        }

        function restartQuiz() {
            startApp();
        }
    </script>
</body>
</html>
